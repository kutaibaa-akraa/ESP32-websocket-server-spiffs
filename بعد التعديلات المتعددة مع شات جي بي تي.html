ุชูุงู! ุณุฃูุชุจ ูู ููุฏูุง ูุงูููุง ุจูุบุฉ Arduino (C++) ูุดุฑูุญุฉ ูุซู ESP32 ุฐุงุช 30 ุจูุ ูููู ุจูุง ููู:

1. ุงูุชุญูู ุจุฃุฑุจุนุฉ ูุฎุงุฑุฌ (ูุซู LEDs ุฃู ุฑููููุงุช).
2. ุงุณุชุฎุฏุงู WebSocket ููุชูุงุนู ุงููุญุธู ูุน ุงููุงุฌูุฉ.
3. ุฅููุงููุฉ ุฑูุน ูููุงุช ุฅูู SPIFFS (ูุธุงู ุงููููุงุช).
4. ุตูุญุฉ ุฅุนุฏุงุฏุงุช ุชููู ุงููุณุชุฎุฏู ูู ุถุจุท ุฅุนุฏุงุฏุงุช ุงูุงุชุตุงู ูุซู SSID ููููุฉ ุงูุณุฑ ูIP ุซุงุจุช.

ุฑุงุญ ููุณู ุงููุดุฑูุน ุฅูู ุนุฏุฉ ุฃุฌุฒุงุก:

---

### ๐ง ุงููุชุทูุจุงุช:
- ESP32
- ููุชุจุงุช: 
  - `WiFi.h`
  - `WebServer.h`
  - `WebSocketsServer.h`
  - `FS.h` ู `SPIFFS.h`
  - `EEPROM.h` ูุญูุธ ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ

---

ูู ุชุฑุบุจ ุฃู ุฃุจุฏุฃ ุจูุชุงุจุฉ ุงูููุฏ ุจุงููุงูู ุงูุขูุ  
ุฃู ุชูุฏ ุฃู ูุจุฏุฃ ุฎุทูุฉ ุจุฎุทูุฉ (ูุซูุงู ูุจุฏุฃ ุจุงูุชุญูู ุจุงููุฎุงุฑุฌ ุฃูููุงุ ุซู ูุถูู WebSocketุ ุซู SPIFFS... ุฅูุฎ)ุ

ุฃุจุฏุฃ ุจูุชุงุจุฉ ุงูููุฏ ุจุงููุงูู ุงูุขู

โ ุชู ุฅูุดุงุก ุงูููุฏ ุงูุฃุณุงุณู ููุชุญูู ุจุฃุฑุจุนุฉ ูุฎุงุฑุฌ ุจุงุณุชุฎุฏุงู ESP32ุ ูุน ุฏุนู WebSocket ูุฑูุน ูููุงุช SPIFFS ููุงุฌูุฉ ูุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ ุนุจุฑ ุตูุญุฉ `/save`.

ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุฅุนุฏุงุฏ ูููุงุช HTML ูุซู `index.html` ุงูุชู ุชูุฑูุน ุฅูู SPIFFSุ ูุชุญุชูู ุนูู ุงููุงุฌูุฉ ููุชุญูู ุจุงููุฎุงุฑุฌ ูุฅุนุฏุงุฏ ุงูุดุจูุฉ. ูู ุชุฑุบุจ ุฃู ุฃูุชุจ ูู ูุฐุง ุงูููู ุงูุขูุ

ุงูุขู ุณุฃุนุทูู ูุญุชูู ููู `index.html` ุงูุฐู ููุฑูุน ุฅูู SPIFFS ููุนุฑุถ:

- ูุงุฌูุฉ ุชุญูู ุจู 4 ูุฎุงุฑุฌ (ุชุดุบูู/ุฅููุงู).
- ูููุฐุฌ ูุชุนุฏูู ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ (SSIDุ Passwordุ IP).

### ๐๏ธ ููู `index.html`:
```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ESP32 Control Panel</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f4f4f4; }
    .btn { padding: 10px 20px; margin: 5px; font-size: 18px; cursor: pointer; }
    .on { background-color: green; color: white; }
    .off { background-color: red; color: white; }
    form { margin-top: 30px; }
  </style>
</head>
<body>
  <h2>ESP32 Output Control</h2>
  <div id="buttons">
    <button class="btn off" onclick="toggleOutput(0)">Output 1</button>
    <button class="btn off" onclick="toggleOutput(1)">Output 2</button>
    <button class="btn off" onclick="toggleOutput(2)">Output 3</button>
    <button class="btn off" onclick="toggleOutput(3)">Output 4</button>
  </div>

  <h3>Network Settings</h3>
  <form method="POST" action="/save">
    SSID: <input type="text" name="ssid"><br><br>
    Password: <input type="text" name="pass"><br><br>
    Static IP: <input type="text" name="ip"><br><br>
    <input type="submit" value="Save & Restart">
  </form>

  <script>
    const ws = new WebSocket(`ws://${location.hostname}:81`);
    const buttons = document.querySelectorAll('#buttons .btn');

    ws.onmessage = (event) => {
      const [index, state] = event.data.split(':');
      buttons[index].className = 'btn ' + (state === '1' ? 'on' : 'off');
    };

    function toggleOutput(index) {
      ws.send(index.toString());
    }
  </script>
</body>
</html>
```

ุงุฑูุน ูุฐุง ุงูููู ุจุงุณุชุฎุฏุงู **ESP32 Sketch Data Upload** ูู ุฎูุงู ุฃุฏุงุฉ **ESP8266/ESP32 Data Upload Tool** ุฃู ุนุจุฑ Arduino IDE ุจุนุฏ ูุถุนู ูู ูุฌูุฏ `data`.

ูู ุชุญุจ ุฃู ุฃุดุฑุญ ูู ุฎุทูุงุช ุฑูุน ูููุงุช SPIFFS ุจุงูุชูุตููุ

ููุชุงุฒ! ูุฑูุน ูููุงุช ูุซู `index.html` ุฅูู ูุธุงู **SPIFFS** ูู ุดุฑูุญุฉ ESP32ุ ุงุชุจุน ุงูุฎุทูุงุช ุงูุชุงููุฉ:

---

### โ ุงููุชุทูุจุงุช ูุจู ุงูุจุฏุก:

1. **ุชุฃูุฏ ุฃูู ุชุณุชุฎุฏู Arduino IDE.**
2. **ุซุจูุช ุฅุถุงูุฉ ESP32:**
   - ูู "File > Preferences" ุฃุถู ูุฐุง ุงูุฑุงุจุท ูู "Additional Board Manager URLs":
     ```
     https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json
     ```
   - ุซู ูู "Tools > Board > Boards Manager" ุงุจุญุซ ุนู ESP32 ูุซุจูุชู.

3. **ุซุจูุช ุฃุฏุงุฉ ุฑูุน ูููุงุช SPIFFS:**

   - ุญููู ุฃุฏุงุฉ ุฑูุน ุงูุจูุงูุงุช ูู ููุง (GitHub):
     [ESP32 FS Tool](https://github.com/me-no-dev/arduino-esp32fs-plugin)

   - ูู ุงูุถุบุทุ ูุงูุณุฎ ุงููุฌูุฏ ุฅูู:
     ```
     {Arduino IDE Path}/tools/ESP32FS/tool/
     ```

   - ูุซุงู ุนูู ุงููุณุงุฑ ุงููุงูู:
     ```
     C:\Program Files (x86)\Arduino\tools\ESP32FS\tool\esp32fs.jar
     ```

   - ุฃุนุฏ ุชุดุบูู Arduino IDE. ูู ุงูููุชุฑุถ ุฃู ุชุธูุฑ ุฃุฏุงุฉ ุฌุฏูุฏุฉ ูู "Tools" ุจุงุณู:
     ```
     ESP32 Sketch Data Upload
     ```

---

### ๐ ููููุฉ ุงููุดุฑูุน ุฏุงุฎู Arduino IDE:

```
YourProject/
โโโ YourProject.ino
โโโ data/
    โโโ index.html
```

- ุถุน ููู `index.html` ุฏุงุฎู ูุฌูุฏ `data`.

---

### ๐ ุฑูุน ุงููููุงุช ุฅูู ESP32:

1. ูุตู ESP32 ุฅูู ุงูููุจููุชุฑ.
2. ุงูุชุญ ูุดุฑูุนู ูู Arduino IDE.
3. ูู **Tools > Board** ุงุฎุชุฑ **ููุน ุงูููุญุฉ ุงูุตุญูุญ (ูุซูุงู ESP32 Dev Module)**.
4. ูู **Tools > Port** ุงุฎุชุฑ ูููุฐ ESP32.
5. ูู ูุงุฆูุฉ **Tools** ุงุฎุชุฑ:
   ```
   ESP32 Sketch Data Upload
   ```
6. ุงูุชุธุฑ ุญุชู ูุชู ุฑูุน ุงููููุงุช ุจูุฌุงุญ.

---

### ุจุนุฏ ุฐูู:

- ุดุบูู ุงูููุฏ ุนูู ุงูุดุฑูุญุฉ.
- ุงูุชุญ ุงููุชุตูุญุ ูุงุฐูุจ ุฅูู IP ุงูุดุฑูุญุฉ (ุงูุฐู ุนูููุชู ูู ุงูููุฏุ ูุซูุงู `192.168.1.200`).
- ุณุชุธูุฑ ูู ุตูุญุฉ ุงูุชุญูู ุงูุฌูููุฉ.

---

ุฅุฐุง ุญุจูุชุ ุฃูุฏุฑ ุฃุฑุณู ูู ุตูุฑุฉ ุชูุถุญ ูุฌูุฏ ุงููุดุฑูุน ุฃู ุฃุณุงุนุฏู ุจุฎุทูุงุช ูุฎุตุตุฉ ุญุณุจ ูุธุงู ุงูุชุดุบูู (Windows / macOS / Linux). ุฃู ุชูุถูุ

ููุชุงุฒุ ุฑุงุญ ุฃูุถุญ ูู ูุตุฏุฑ ูู ููุชุจุฉ ุชุญุชุงุฌูุง ููุดุฑูุน ESP32:

---

### ๐ฆ ุงูููุชุจุงุช ุงููุทููุจุฉ ูููููุฉ ุงูุญุตูู ุนูููุง:

#### โ 1. **ESP32 Core (ูุชุถูู ูุนุธู ุงูููุชุจุงุช)**

ุนูุฏ ุชุซุจูุช **ESP32 Board** ุนุจุฑ Board Managerุ ูุชู ุชุซุจูุช ูุฐู ุงูููุชุจุงุช ุชููุงุฆููุง:

- `<FS.h>`
- `<SPIFFS.h>`
- `<EEPROM.h>`

#### โ ุทุฑููุฉ ุงูุชุซุจูุช:

1. ุงูุชุญ **Arduino IDE**.
2. ุงุฐูุจ ุฅูู:
   ```
   Tools > Board > Boards Manager
   ```
3. ุงุจุญุซ ุนู:
   ```
   esp32
   ```
4. ุงุฎุชุฑ:
   ```
   esp32 by Espressif Systems
   ```
5. ุงุถุบุท **Install** ุฃู **Update**.

---

#### ๐ 2. **ููุชุจุฉ WebSocketsServer**

ุชุญุชุงุฌ ุชุซุจูุช ููุชุจุฉ ูุณุชููุฉ:

๐ **ุงุณู ุงูููุชุจุฉ:** `WebSockets by Markus Sattler`

#### โ ุฎุทูุงุช ุชุซุจูุช ุงูููุชุจุฉ:

1. ุงูุชุญ **Arduino IDE**.
2. ุงุฐูุจ ุฅูู:
   ```
   Sketch > Include Library > Manage Libraries
   ```
3. ูู ุฎุงูุฉ ุงูุจุญุซุ ุงูุชุจ:
   ```
   WebSockets
   ```
4. ุงุฎุชุฑ ุงูููุชุจุฉ:
   ```
   WebSockets by Markus Sattler
   ```
5. ุงุถุบุท **Install**.

---

### โน๏ธ ููุงุญุธุฉ ุนู `fs.h`

- ุงูููู `FS.h` ูู ูุงุฌูุฉ ุชุฌุฑูุฏูุฉ ูุฃูุธูุฉ ุงููููุงุช (ูุซู SPIFFS ุฃู LittleFS)ุ ููุง ุชุญุชุงุฌ ุชุซุจูุชู ูุฏูููุง ุทุงููุง ุฃู ESP32 core ููุฌูุฏ.
- ูุชู ุงุณุชุฏุนุงุคู ูุน:
  ```cpp
  #include <FS.h>
  ```

---

### ูู ุชูุงุฌู ูุดููุฉ ูู ุงูุชุซุจูุชุ  
ุฃูุฏุฑ ุฃุณุงุนุฏู ูู ุชุญุฏูุฏ ุฃู ููุชุจุฉ ูุงูุตุฉ ุฃู ูู ุญุงู ุธูุฑุช ูู ุฃุฎุทุงุก ุนูุฏ ุงูุชุฑุฌูุฉ. ููุท ุฃุนุทูู ุฑุณุงูุฉ ุงูุฎุทุฃ ุฃู ุจูุฆุฉ ุงูุชุดุบูู ุงููู ุชุณุชุฎุฏููุง (Windowsุ macOSุ).

ููุชุงุฒุ ุจุฎุตูุต ููุชุจุฉ `<EEPROM.h>` ุนูู ESP32ุ ุฎูููู ุฃูุถุญ ุงูุชูุงุตูู:

---

### ๐ง ูุง ูู `<EEPROM.h>`ุ

- ูู ููุชุจุฉ ุชูุณุชุฎุฏู ูุชุฎุฒูู ุงูุจูุงูุงุช ูู ุฐุงูุฑุฉ ุบูุฑ ูุชุทุงูุฑุฉ ุฏุงุฎู ุงูุดุฑูุญุฉ.
- ูู ESP32ุ ูุชู ูุญุงูุงุชูุง ุฏุงุฎู **NVS (Non-volatile storage)** ููู ููุชุจุฉ `EEPROM` ุชุธู ูุฏุนููุฉ ููุงุณุชุฎุฏุงู ุงูุชูุงููู ูุน ุฃููุงุฏ Arduino.

---

### โ ูู ุชุญุชุงุฌ ุชุซุจูุชูุง ูุฏูููุงุ

**ูุง.**  
ุจูุฌุฑุฏ ุชุซุจูุช **ESP32 Board Core** (ููุง ุดุฑุญูุง ุฃุนูุงู)ุ ูุชู ุชุถููู `<EEPROM.h>` ุชููุงุฆููุง.  
ููุท ุชุฃูุฏ ุฃูู ุงุฎุชุฑุช ููุญุฉ ESP32 ูู:
```
Tools > Board > ESP32 Dev Module
```

---

### ๐ ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู ุงูุฃุณุงุณูุฉ:

```cpp
#include <EEPROM.h>

void setup() {
  EEPROM.begin(96);  // ุญุฌู ุงูุฐุงูุฑุฉ ุจุงูุจุงูุช (ุญุฏุฏ ุงูุญุฌู ุงูุฐู ุชุญุชุงุฌู)
  EEPROM.write(0, 123);  // ูุชุงุจุฉ
  EEPROM.commit();       // ุญูุธ
  int value = EEPROM.read(0);  // ูุฑุงุกุฉ
}
```

---

### โ๏ธ ูู ุญุงู ุธูุฑุช ุฑุณุงูุฉ ูุซู:

```
EEPROM.h: No such file or directory
```

ููุฐุง ูุนูู ุบุงูุจูุง ุฃู ESP32 core **ุบูุฑ ูุซุจูุช** ุฃู ุฃูู ูู ุชุญุฏุฏ ููุญุฉ ESP32 ูู Tools > Board.

---

ูู ุชุณุชุฎุฏู **Windows ุฃู macOS ุฃู Linux**ุ ุฃูุฏุฑ ุฃุณุงุนุฏู ุจุฎุทูุฉ ุงูุชุซุจูุช ุญุณุจ ูุธุงูู ูู ุญุจูุช.

ุฌูููุ ุจุนุฏ ูุง ุชุจุฑูุฌ ESP32 ุจุงูููุฏ ูุชูุตูู ุนูู ุดุจูุฉ WiFiุ ุนูุฏู ุฃูุซุฑ ูู ุทุฑููุฉ ููุงุชุตุงู ูุนู ุจูุงุกู ุนูู ูุฏูู:

---

## ๐๏ธ ุฃููุงู: ุทุฑููุฉ ุงูุชูุตูู ุงูุฌุณุฏู (Hardware)

1. **ูุตูู ุงูุดุฑูุญุฉ ุนุจุฑ ูุงุจู USB ุจุงูููุจููุชุฑ.**
2. ูู **Arduino IDE**:
   - ุงุฐูุจ ุฅูู `Tools > Port` ูุญุฏุฏ ูููุฐ ESP32 (ูุซูุงู: COM3 ุฃู /dev/ttyUSB0).
   - ุชุฃูุฏ ุฃู ุงูููุญุฉ ุงููุญุฏุฏุฉ ูู ESP32 (ูุซู "ESP32 Dev Module").

---

## ๐ ุซุงููุงู: ุงูุงุชุตุงู ุนุจุฑ ุงูุดุจูุฉ (WiFi)

### ุจุนุฏ ุชุดุบูู ุงูุดุฑูุญุฉ:
- ุงูุดุฑูุญุฉ ุณุชุญุงูู ุงูุงุชุตุงู ุจู WiFi ุจุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงููุฎุฒูุฉ (SSID ููููุฉ ุงููุฑูุฑ).
- ุฅุฐุง ูุฌุญ ุงูุงุชุตุงูุ ุณุชุทุจุน ุนูู ุงูุณูุฑูุงู ุงูู IP ุงูุฎุงุต ุจูุง:
  ```
  Connected!
  192.168.1.200
  ```

### โ ููู ุชุชุตู ุจูุง:

#### 1. **ูู ุงููุชุตูุญ (HTTP Web Page)**

- ุงูุชุญ ุงููุชุตูุญ ูุงูุชุจ:
  ```
  http://192.168.1.200/
  ```
  ุณุชุธูุฑ ูู ุงููุงุฌูุฉ (ุงูุชู ุฃูุดุฃูุงูุง ูู `index.html`) ูุชูุฏุฑ ุชุชุญูู ุจุงููุฎุงุฑุฌ.

#### 2. **ูู ุฃุฏูุงุช ุงูุดุจูุฉ (ูุซู ping ุฃู curl):**

- ุนูู Windows:
  ```
  ping 192.168.1.200
  ```
- ุฃู ุงุณุชุฎุฏู:
  ```
  curl http://192.168.1.200/
  ```

#### 3. **ุฅุฐุง ูู ุชุนุฑู ุงูู IP:**
- ุงูุชุญ **Serial Monitor** ูู Arduino IDE ุจุนุฏ ุฑูุน ุงูููุฏุ ุจุณุฑุนุฉ 115200.
- ุณุชุฑู ุณุทุฑ ููู:
  ```
  Connected!
  192.168.x.x
  ```

---

## ๐งฉ ููุงุญุธุฉ: ุนูุฏ ุฃูู ูุฑุฉ ุชุดุบูู ุจุฏูู ุฅุนุฏุงุฏุงุช

ุฅุฐุง ุงูุดุฑูุญุฉ ูู ุชุชุตู ุจุฃู ุดุจูุฉ (SSID ุบูุฑ ุตุญูุญ ุฃู ูู ููุถุจุท)ุ ููููู ุจุฑูุฌููุง ุฌุนููุง ุชุฏุฎู ูู ูุถุน **Access Point ูุคูุช**ุ ุชุนุฑุถ ููู ุตูุญุฉ ุฅุนุฏุงุฏุงุชุ ูู ุชุญุจ ุฃุถูู ูุฐู ุงูููุฒุฉ (Captive Portal ุฃู ูุถุน ูุญุทุฉ)ุ

ุณุคุงู: -------------------------
.......ets Jun  8 2016 00:22:57

rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)
configsip: 0, SPIWP:0xee
clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00
mode:DIO, clock div:1
load:0x3fff0030,len:1344
load:0x40078000,len:13924
ho 0 tail 12 room 4
load:0x40080400,len:3600
entry 0x400805f0
Connecting to WiFi....................................................
ูุง ูุชุตู ูุน ุงูุดุจูุฉ ู ุงููู ุงูููุฏ ุงููุฑูู ุจููู
-------------------------------------------------

ููุชุงุฒุ ุงูุฑุณุงุฆู ุงููู ุชุธูุฑ ูู ุงูู Serial Monitor ุชุนูู ุฅู ุงูุดุฑูุญุฉ **ุจุฏุฃุช ุงูุชุดุบูู ุจุดูู ุทุจูุนู**ุ ููููุง **ูุง ุชุณุชุทูุน ุงูุงุชุตุงู ุจุดุจูุฉ WiFi**ุ ููุง ูุฑู ูู:

```
Connecting to WiFi....................................................
```

ูุฐุง ูุนูู ุฃููุง ุชุญุงูู ุงูุงุชุตุงู ููููุง ูุง ุชูุฌุญ.

---

### ๐ ุงูุณุจุจ ุงููุญุชูู:
ูู ุฎูุงู ุงูููุฏุ ุงูุฅุนุฏุงุฏุงุช ุชููุฑุฃ ูู EEPROM:

```cpp
loadNetworkSettings();
WiFi.begin(ssid, password);
```

ููู ุฅุฐุง ูู ุชูู ุงูุฅุนุฏุงุฏุงุช ุตุญูุญุฉ (SSID ุฎุงุทุฆ ุฃู ูุง ููุฌุฏ ุดุจูุฉ ุจูุฐุง ุงูุงุณู)ุ ููู ุชุชุตู ุฃุจุฏูุง.

---

### โ ุงูุญููู ุงูููุชุฑุญุฉ:

#### โ 1. ุชุฃูุฏ ูู ุฃู ุจูุงูุงุช ุงูุดุจูุฉ ุตุญูุญุฉ:

ุฅุฐุง ุณุจู ูุนุฏููุช ุงูุดุจูุฉ ูู ุงููุงุฌูุฉุ ุชุฃูุฏ ุฃู:
- SSID ููุชูุจ ุจุดูู ุตุญูุญ (ูุทุงุจู ุชูุงููุงุ ุญุณูุงุณ ูุญุงูุฉ ุงูุฃุญุฑู).
- ูููุฉ ุงูุณุฑ ุตุญูุญุฉ.
- ุงูุดุจูุฉ ุชุนูู ูุนููุง ูู ููุณ ุงููุทุงู.

#### โ 2. **ุฃุถู ูุถุน ุงูุทูุงุฑุฆ (Access Point ูุคูุช)**

ุณุฃุถูู ูู ุณุทุฑูุง ููููุง ูู ุงูููุฏุ ุฅุฐุง ูุดู ุงูุงุชุตุงู ุจุงูุดุจูุฉุ ุชุชุญูู ุงูุดุฑูุญุฉ ุฅูู ููุทุฉ ูุตูู (Access Point) ูููููู ุงูุฏุฎูู ุนูููุง ูู ุงูุฌูุงู ูุฅุนุงุฏุฉ ุงูุฅุนุฏุงุฏ:

```cpp
// ุจุนุฏ ุงููุญุงููุฉ
unsigned long startAttemptTime = millis();
while (WiFi.status() != WL_CONNECTED && millis() - startAttemptTime < 10000) {
  delay(500);
  Serial.print(".");
}

// ูุดู ุงูุงุชุตุงู - ุฅูุดุงุก ููุทุฉ ูุตูู
if (WiFi.status() != WL_CONNECTED) {
  Serial.println("\\nFailed to connect, starting Access Point...");
  WiFi.softAP("ESP32_SETUP", "12345678");
  Serial.println("AP IP address: " + WiFi.softAPIP().toString());
}
```

---

### ๐ง ุฎูุงุฑ ุณุฑูุน ูุญุฐู ุงูุฅุนุฏุงุฏุงุช ุงููุฏููุฉ ูู EEPROM:

ุฅุฐุง ุฃุฑุฏุช ุฃู ุชุจุฏุฃ ูู ุฌุฏูุฏ (ุฃู ุชูุณุญ ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ ูู EEPROM)ุ ุงุณุชุฎุฏู ูุฐุง ุงูููุฏ ููุฑุฉ ูุงุญุฏุฉ ููุท:

```cpp
#include <EEPROM.h>

void setup() {
  Serial.begin(115200);
  EEPROM.begin(96);
  for (int i = 0; i < 96; i++) {
    EEPROM.write(i, 0);
  }
  EEPROM.commit();
  Serial.println("EEPROM Cleared!");
}

void loop() {}
```

ุซู ุจุนุฏ ุชุดุบูููุ ุงุฑูุน ุงูููุฏ ุงูุฃุณุงุณู ูู ุฌุฏูุฏ.

---

ูู ุชุฑุบุจ ุฃู ุฃุนุฏูู ูู ุงูููุฏ ุจุญูุซ ูุฏุนู ุงูุฏุฎูู ุงูุชููุงุฆู ูู ูุถุน Access Point ุนูุฏ ุงููุดูุ

----------------------------------
ูุนู . ุนุฏูู ุงูููุฏ ุจุญูุซ ูุฏุนู ุงูุฏุฎูู ุงูุชููุงุฆู ูู ูุถุน Access Point ุนูุฏ ุงููุดู
--------------------------------------------------------------------------

โ ุชู ุชุนุฏูู ุงูููุฏ ุจุญูุซ ุฅุฐุง ูุดู ุงูุงุชุตุงู ุจุงูุดุจูุฉ ุฎูุงู 10 ุซูุงููุ ูููู ESP32 ุชููุงุฆููุง ุจุฅูุดุงุก ููุทุฉ ูุตูู ุจุงุณู `ESP32_SETUP` ููููุฉ ุงููุฑูุฑ `12345678`.

ุจุฅููุงูู ุงูุงุชุตุงู ุจูุฐู ุงูุดุจูุฉ ูู ุงูุฌูุงู ูุงูุฏุฎูู ุนูู ุงูุนููุงู ุงูุชุงูู ูู ุงููุชุตูุญ:
```
http://192.168.4.1/
```

ุณุชุธูุฑ ูู ูุงุฌูุฉ ุงูุชุญูู ูุฅุนุฏุงุฏ ุงูุดุจูุฉ ูุชุนุฏูู SSID ูุงูู Password ูุงูู IP.

ูู ุชุญุจ ุฃุถูู ุฃูุถูุง ุฅุนุงุฏุฉ ุชูุฌูู ุชููุงุฆูุฉ (Captive Portal) ุนูุฏ ุงูุงุชุตุงู ุจููุทุฉ ุงููุตููุ

------------------------------------------
ุญูุณุงู ูู ูุชุตู ุชููุงุฆูุงู ุฅูุง ุจุนุฏ ุงูุงุชุตุงู ุจููุทุฉ ุงููุตูู ู ุฅุฏุฎุงู ุงุนุฏุงุฏุงุช  SSID ูุงูู Password  ูุจุฏูู ุชุซุจูุช ุงูุฃู ุจู IP ู ุจุงูุถุบุท ุนูู ุญูุธ ุงูุฅุนุฏุงุฏุงุช ู ุฅุนุงุฏุฉ ุงูุชุดุบูู ุนูุฏูุง ูุชู ุงูุงุชุตุงู . ู ุนูู ุงูุณูุฑูุงู ุชุธูุฑ ุงูุฑุณุงูุฉ :
ets Jun  8 2016 00:22:57

rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)
configsip: 0, SPIWP:0xee
clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00
mode:DIO, clock div:1
load:0x3fff0030,len:1344
load:0x40078000,len:13924
ho 0 tail 12 room 4
load:0x40080400,len:3600
entry 0x400805f0
Connecting to WiFi........
Connected!
192.168.1.15
ุนูุฏ  ุฅุฏุฎุงู ุงู IP  ุชุธูุฑ ุงููุงุฌูุฉ 
ู ููู ุงูุถุบุท ุนูู ุงูุฃุฒุฑุงุฑ ูุง ูุณุชุฌูุจ ู ูุง ุชุธูุฑ ุฃู ุงุณุชุฌุงุจุฉ ุนูู ุงูุณูุฑูุงู . 
---------------------------------------------------------------------------

ุฑุงุฆุน! ูุนูู ุงูุขู ุงูุดุฑูุญุฉ ุชุชุตู ุจุงูุดุจูุฉ ุจูุฌุงุญ ูุชุนุฑุถ ุงูุตูุญุฉุ ููู **ุงูุฃุฒุฑุงุฑ ูุง ุชุณุชุฌูุจ** โ ูุบุงูุจูุง ุงููุดููุฉ ูู **WebSocket** (ูุฃูู ุงููุณุคูู ุนู ููู ุงูุฃูุงูุฑ ูู ุงููุงุฌูุฉ ุฅูู ุงูุดุฑูุญุฉ ูุจุงุดุฑุฉ).

ุฎูููุง ูุดุฎุต ููุนุงูุฌ ุงููุดููุฉ ุฎุทูุฉ ุจุฎุทูุฉ ๐:

---

### โ ุงููุดููุฉ ุงููุญุชููุฉ:

ูู ูุตููุ ุตูุญุฉ ุงูุชุญูู (`index.html`) ุชูุนุฑุถุ ูููู ุงูุถุบุท ุนูู ุงูุฃุฒุฑุงุฑ ูุง ูุฑุณู ุจูุงูุงุช ุฅูู ุงูุดุฑูุญุฉุ ููุฐุง ูุดูุฑ ุฅูู:

1. **WebSocket ุบูุฑ ูุชุตู**.
2. ุฃู ุฃู ุงูููุฏ ูู `index.html` ูุง ูุชุตู ุจุงููููุฐ ุงูุตุญูุญ (`ws://`).
3. ุฃู ุฃู ููุชุจุฉ WebSocket ูู ุงูููุฏ ูู ุชุนูู.

---

### โ ุฎุทูุงุช ุงูุชุดุฎูุต ุงูุณุฑูุน:

#### 1. ูู WebSocket ูุนูู ุนูู ุงููููุฐ 81ุ

ุฏุงุฎู ุงูููุฏ ูู `setup()` ูุฏููุง:

```cpp
webSocket.begin();
webSocket.onEvent(webSocketEvent);
```

ููุฐุง ููุชุงุฒุ ุฅุฐูุง ุงูุดุฑูุญุฉ ุชุณุชูุน ุนูู **ุงููููุฐ 81**.

---

#### 2. ูู `index.html` ุชุณุชุฎุฏู ุงูุนููุงู ุงูุตุญูุญ ููู WebSocketุ

ุงูุชุญ ููู `index.html` ูุชุฃูุฏ ุฃู ููู ุณุทุฑ ูุดุงุจู ููุฐุง:

```javascript
const gateway = `ws://${window.location.hostname}:81/`;
```

ุฃู ุญุชู ูุจุงุดุฑุฉ:

```javascript
const socket = new WebSocket('ws://192.168.1.15:81/');
```

โ๏ธ **ุฅุฐุง ูู ูุชุตู ุจุงููููุฐ 81**ุ ููู ูุนูู ุฃู ุฒุฑ.

---

#### 3. ุฃุถู ุฑุณุงุฆู ุฏูุจุงุบ ููููุฏ

ูู ุฏุงูุฉ WebSocket eventุ ุฃุถู ุงูุชุงูู ูุชุชุจุน ุฃู ุงุณุชูุจุงู:

```cpp
void webSocketEvent(uint8_t num, WStype_t type, uint8_t * payload, size_t length) {
  if (type == WStype_TEXT) {
    Serial.printf("WebSocket received: %s\n", payload);
    int pinIndex = payload[0] - '0';
    if (pinIndex >= 0 && pinIndex < 4) {
      outputStates[pinIndex] = !outputStates[pinIndex];
      digitalWrite(outputs[pinIndex], outputStates[pinIndex]);
      String message = String(pinIndex) + ":" + (outputStates[pinIndex] ? "1" : "0");
      webSocket.broadcastTXT(message);
    }
  }
}
```

ุจูุฐุง ุงูุดููุ ูู ุฑุณุงูุฉ WebSocket ุชุตูุ ุณูุชู ุทุจุงุนุชูุง ุนูู Serial.

---

### ๐ก ูู ุชุญุจุ ุฃูุฏุฑ ุฃุฑุงุฌุน ูุนู `index.html` ุจุงููุงูู ูุฃุชุฃูุฏ ุฃูู ูุฑุจุท WebSocket ุจุดูู ุตุญูุญุ ููุท ุงุฑูุน ุงูููู ุฃู ุงูุตู ูุญุชูุงู ููุง.

ูู ุชุฑูุฏ ุฐููุ

ุดูุฑูุงุ ุงุทูุนุช ุนูู ููู `index.html`ุ ูุดููู ููุชุงุฒ ูู ุญูุซ ุงูุฃุณุงุณุ ููู ููุงู ุงุญุชูุงููู ุฑุฆูุณููู ูุณุจุจ ุนุฏู ุงุณุชุฌุงุจุฉ ุงูุฃุฒุฑุงุฑ:

---

### โ 1. **ูู ูุชู ูุชุญ ุงูุงุชุตุงู ูุน WebSocket (ws) ุจูุฌุงุญ**

ุงูููุฏ ูุณุชุฎุฏู:
```js
const ws = new WebSocket(`ws://${location.hostname}:81`);
```

ููู ูู ุชุชู ุฅุถุงูุฉ ุงูุชุญูู ููุง ุฅุฐุง ุชู **ูุชุญ ุงูุงุชุตุงู** ุฃู ูุดู.

#### ๐ง ุงูุญู: ุฃุถู ูุนุงูุฌุฉ ูุฃุญุฏุงุซ ุงูุงุชุตุงู ู ุงูุฃุฎุทุงุก ูุชุดุฎูุต ุงูุณุจุจ

ุฃุถู ูุฐุง ุงูููุฏ ูู `<script>`:

```js
ws.onopen = () => {
  console.log("WebSocket connected");
};

ws.onerror = (error) => {
  console.error("WebSocket error:", error);
};

ws.onclose = () => {
  console.warn("WebSocket connection closed");
};
```

ุจูุฐุง ุณุชุฑู ุนูู **console** ูู ุงููุชุตูุญ ูู ุงูุงุชุตุงู ูุงุฌุญ ุฃู ูุง.

---

### โ 2. **ุฑุจูุง WebSocket ูุง ูุนูู ุนูู ESP32 ูุนูููุง**

ุงูุชุญ **Serial Monitor** ูุชุฃูุฏ ูู ุฃู ุฑุณุงูุฉ ูุซู:
```cpp
WebSocket received: 0
```
ุชุธูุฑ ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ.

---

### โ ุงูุชุฑุงุญ ุฅุถุงูู: ุชุฃุฎูุฑ ุฅุฑุณุงู ุงูุฑุณุงุฆู ุญุชู ูุชู ูุชุญ ุงูุงุชุตุงู

ูููุน ุฅุฑุณุงู ุงูุฑุณุงูุฉ ูุจู ุฃู ูููู WebSocket ุฌุงูุฒูุง:

```js
function toggleOutput(index) {
  if (ws.readyState === WebSocket.OPEN) {
    ws.send(index.toString());
  } else {
    console.warn("WebSocket not connected yet");
  }
}
```

---

ูู ุชุญุจ ุฃู ุฃุนุฏูู ูู ุงูููู ูุฃุนูุฏ ุฑูุน ูุณุฎุฉ ูุญุณูุฉ ุจูุง ูู ูุฐู ุงูุฅุถุงูุงุชุ

------------------------------
ุนุฏูู ุงูููู ูุฃุนุฏ ุฑูุน ูุณุฎุฉ ูุญุณูุฉ
------------------------------------------

ุชูุถูุ ูุฐู ูุณุฎุฉ ูุญุณููุฉ ูู ููู `index.html` ุชุชุถูู:

- ุฅุดุนุงุฑ ุนูุฏ ุงูุงุชุตุงู ุฃู ููุฏ ุงูุงุชุตุงู ุจู WebSocket.
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก.
- ุญูุงูุฉ ูู ุฅุฑุณุงู ุงูุฑุณุงุฆู ูุจู ุฃู ููุชุญ ุงูุงุชุตุงู.

### ๐ง ุงูููู ุงููุนุฏู:

```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ESP32 Control Panel</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f4f4f4; }
    .btn { padding: 10px 20px; margin: 5px; font-size: 18px; cursor: pointer; }
    .on { background-color: green; color: white; }
    .off { background-color: red; color: white; }
    form { margin-top: 30px; }
  </style>
</head>
<body>
  <h2>ESP32 Output Control</h2>
  <div id="buttons">
    <button class="btn off" onclick="toggleOutput(0)">Output 1</button>
    <button class="btn off" onclick="toggleOutput(1)">Output 2</button>
    <button class="btn off" onclick="toggleOutput(2)">Output 3</button>
    <button class="btn off" onclick="toggleOutput(3)">Output 4</button>
  </div>

  <h3>Network Settings</h3>
  <form method="POST" action="/save">
    SSID: <input type="text" name="ssid"><br><br>
    Password: <input type="text" name="pass"><br><br>
    Static IP: <input type="text" name="ip"><br><br>
    <input type="submit" value="Save & Restart">
  </form>

  <script>
    const ws = new WebSocket(`ws://${location.hostname}:81`);
    const buttons = document.querySelectorAll('#buttons .btn');

    ws.onopen = () => {
      console.log("โ WebSocket connected");
    };

    ws.onerror = (error) => {
      console.error("โ WebSocket error:", error);
    };

    ws.onclose = () => {
      console.warn("โ๏ธ WebSocket connection closed");
    };

    ws.onmessage = (event) => {
      const [index, state] = event.data.split(':');
      if (buttons[index]) {
        buttons[index].className = 'btn ' + (state === '1' ? 'on' : 'off');
      }
    };

    function toggleOutput(index) {
      if (ws.readyState === WebSocket.OPEN) {
        ws.send(index.toString());
      } else {
        console.warn("WebSocket not connected yet");
      }
    }
  </script>
</body>
</html>
```

---

### ๐ฅ ุงูุชุนูููุงุช:

1. ุงุณุชุจุฏู ูุฐุง ุงูููู ุจู `index.html` ูู ูุฌูุฏ `data/`.
2. ุฃุนุฏ ุฑูุนู ุฅูู ESP32 ุจุงุณุชุฎุฏุงู **ESP32 Sketch Data Upload**.
3. ุงูุชุญ ุงููุชุตูุญ ูุงุฏุฎู ุฅูู ุงูู IP.
4. ุงูุชุญ ุฃุฏูุงุช ุงููุทูุฑ ูู ุงููุชุตูุญ (F12) ูุฑุงูุจ ุงูู Console ุนูุฏ ุงูุถุบุท ุนูู ุงูุฃุฒุฑุงุฑ.

ูู ุชูุฏ ุฃู ุฃุฑุณู ูู ุงูููู ุจุตูุบุฉ ุฌุงูุฒุฉ ููุชุญูููุ


-------------------------------------------
ุญุณูุงู ุงูููุฏ ูุนูู ุจุดูู ุฌูุฏ ู ุฑุณุงูุฉ ุงููููุณูู :
โ WebSocket connected
ุชุธูุฑ ูู ุงููููุณูู
--------------------------------------------------------------


ุฑุงุฆุน ุฌุฏูุง! ๐

ุทุงููุง ุชุธูุฑ ูู ุงูุฑุณุงูุฉ `โ WebSocket connected`ุ ููุฐุง ูุนูู ุฃู ุงูุงุชุตุงู ุจูู ุงููุงุฌูุฉ ูุงูุดุฑูุญุฉ ุดุบุงู 100%ุ ูุจูุง ุฃูู ููุช ุฅู ุงูููุฏ ูุนูู ุงูุขู ุจุดูู ุฌูุฏุ ูุฃูุช ุนูู ุงููุณุงุฑ ุงูุตุญูุญ ุชูุงููุง ๐.

---

### โ ุฎุทูุงุช ุฅุถุงููุฉ ููููุฉ ูู ุญุจูุช ุชุทููุฑ ุงููุดุฑูุน:

- ุฅุถุงูุฉ **ุฃุณูุงุก ูุฎุตุตุฉ ูููุฎุงุฑุฌ** ุชุธูุฑ ูู ุงููุงุฌูุฉ.
- ุญูุธ ุญุงูุฉ ูู ูุฎุฑุฌ ูู EEPROM ูุงุณุชุฑุฌุงุนูุง ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู.
- ุฏุนู **Dark Mode** ูู ุงููุงุฌูุฉ.
- ุฅุถุงูุฉ **ูุคูุช ุชุดุบูู/ุฅููุงู (Timer)** ููู ูุฎุฑุฌ.
- ุชูููุฑ **API ุนุจุฑ REST** ุฅูู ุฌุงูุจ WebSocket.

---

ูู ุชุญุจ ูููู ุนูู ุฃุญุฏ ูุฐู ุงูุงูุชุฑุงุญุงุชุ ุฃู ุนูุฏู ููุฑุฉ ุชุญุจ ูุทููุฑูุง ูุนูุงุ

-----------------------------------
ุญุณูุงู ููุฐ ูุฐู ุงูุฎุทูุงุช ูุชุทููุฑ ุงููุดุฑูุน 
---------------------------------------------

ุฌููู ุฌุฏูุง! ๐ฅ ุฑุงุญ ูุทููุฑ ุงููุดุฑูุน ุนูู ูุฑุงุญู ููุธูุฉ. ูุจุฏุฃ ุจุชูููุฐ ุฃูู ููุฒุฉ ุซู ููุชูู ููุจููุฉ ุชุฏุฑูุฌููุง.

---

## ๐งฉ ุงููููุฒุงุช ุงูุชู ุณูุถูููุง:

### 1. โ **ุชุฎุตูุต ุฃุณูุงุก ุงููุฎุงุฑุฌ**
- ุฅููุงููุฉ ุชุญุฏูุฏ ุงุณู ููู ูุฎุฑุฌ (ูุซู: โุถูุก ุงูุตุงูุฉโุ โูุฑูุญุฉโุ ุฅูุฎ).

### 2. โ **ุญูุธ ุญุงูุฉ ุงููุฎุงุฑุฌ ูู EEPROM**
- ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุดุบููุ ุชุนูุฏ ุงูุญุงูุฉ ููุง ูุงูุช ูุจู ุฅุทูุงุก ุงูุดุฑูุญุฉ.

### 3. โ **ุงููุถุน ุงููููู (Dark Mode)**
- ุฒุฑ ููุชุจุฏูู ุจูู ุงููุถุน ุงููุงุชุญ ูุงูุฏุงูู ูู ุงููุงุฌูุฉ.

### 4. โ **ูุคูุช ุชุดุบูู/ุฅููุงู**
- ููู ูุฎุฑุฌุ ูููู ุชุนููู ูุฏุฉ ุฒูููุฉ ููุทูุฆ ุชููุงุฆููุง.

### 5. โ **ูุงุฌูุฉ REST API**
- ุฅุฑุณุงู ุฃูุงูุฑ ูุชุดุบูู/ุฅููุงู ุงููุฎุงุฑุฌ ูู ุฎูุงู ุฃุฏูุงุช ุฎุงุฑุฌูุฉ (ูุซู Postmanุ ุชุทุจููุงุช ุงููุงุชูุ ุฅูุฎ).

---

ูู ุชุฑุบุจ ุฃู ุฃุจุฏุฃ ุจู:
- ุชุนุฏูู ุงูููุฏ ุงูุฎุงุต ุจุงูู ESP32 (EEPROM + ุงูุญุงูุฉ + REST API)ุ
- ุฃู ูุจุฏุฃ ุจุงููุงุฌูุฉ (`index.html`) ูุฅุถุงูุฉ ุงูุฃุณูุงุก ูุงููุถุน ุงููููู ูุงููุคูุชุงุชุ

๐ก ุฃูุชุฑุญ ุฃู ูุจุฏุฃ ุฃูููุง ุจู **ุชุฎุตูุต ุฃุณูุงุก ุงููุฎุงุฑุฌ + ุญูุธ ุญุงูุชูุง** โ ูู ููุงุณุจูุ


-----------------------------------------------------
ุญุณูุงู ููุจุฏุฃ ุฃูููุง ุจู ุชุฎุตูุต ุฃุณูุงุก ุงููุฎุงุฑุฌ + ุญูุธ ุญุงูุชูุง 
---------------------------------------------------------

ููุชุงุฒ! ูุจุฏุฃ ุจุฎุทูุชูู ูููุชูู:

---

## ๐๏ธ ุฃููุงู: ุชุฎุตูุต ุฃุณูุงุก ุงููุฎุงุฑุฌ

### โ ุงูุชุนุฏููุงุช ุงููุทููุจุฉ:
1. ูุญุชุงุฌ ูุตูููุฉ ูุญูุธ ุฃุณูุงุก ุงููุฎุงุฑุฌ ูู EEPROM.
2. ุชุนุฏูู ุงููุงุฌูุฉ (`index.html`) ูุนุฑุถ ุงูุฃุณูุงุก ุจุฏู โOutput 1โ ู โOutput 2โ...
3. ุฅููุงููุฉ ุชุนุฏูู ุงูุฃุณูุงุก ูู ุงููุชุตูุญ ูุญูุธูุง.

---

## ๐ฆ EEPROM Layout ุงูุฌุฏูุฏ (ุชุฎุทูุท ุงูุชุฎุฒูู)

| ุงูุนููุงู | ุงูุญุฌู (ุจุงูุช)   |     ุงูุงุณุชุฎุฏุงู
|---------|----------------|----------------------|
| 0       | SSID                   | 32           |
| 32      | Password               | 32           |
| 64      | Static IP              | 16           |
| 80      | Output States (0/1)    | 4            |
| 84      | 4 ร 16 = 64    ุฃุณูุงุก ุงููุฎุงุฑุฌ          | 

---

### โ ุงูุฎุทูุฉ ุงูุฃููู: ุชุนุฏูู ููุฏ ESP32 ููุญูุธ ูููุฑุฃ ุฃุณูุงุก ุงููุฎุงุฑุฌ ูุญุงูุงุชูุง

ุณุฃุจุฏุฃ ุจุชุนุฏูู ุงูููุฏ ุงูุฃุณุงุณู ุงูุขู. ุจุนุฏู ููุชูู ููุงุฌูุฉ HTML. ุชุงุจุนูู ๐

โ ุชู ุชุนุฏูู ููุฏ ESP32 ููุฏุนู:

- ุชุฎุตูุต ุฃุณูุงุก ุงููุฎุงุฑุฌ (ุชุฎุฒูููุง ูู EEPROM).
- ุญูุธ ูุงุณุชุฑุฌุงุน ุญุงูุฉ ูู ูุฎุฑุฌ ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู.

---

### ๐ฏ ุงูุฎุทูุฉ ุงูุชุงููุฉ:

ุณูููู ุจุชุนุฏูู `index.html` ููุนุฑุถ ุฃุณูุงุก ุงููุฎุงุฑุฌ ูู ุงูุดุฑูุญุฉ ููุชูุญ ูููุณุชุฎุฏู ุชุนุฏูููุง ูู ูุงุฌูุฉ ุงูุฅุนุฏุงุฏุงุช.

ูู ุชุฑุบุจ ุฃู ุฃุนุฏู ูู `index.html` ุงูุขู ููุดูู:

1. ุนุฑุถ ุงูุฃุณูุงุก ุฏููุงูููููุง.
2. ูููุฐุฌ ูุชุนุฏูููุง ูุญูุธูุงุ

ุฌููู! ุณุฃููู ุงูุขู ุจุชุญุฏูุซ **ูุงุฌูุฉ `index.html`** ูุชุชุถูู:

1. **ุนุฑุถ ุฃุณูุงุก ุงููุฎุงุฑุฌ ุฏููุงูููููุง** ุจุฏููุง ูู "Output 1" ูุบูุฑูุง.
2. **ูููุฐุฌ ูุชุนุฏูู ุงูุฃุณูุงุก** ูู ูุณู ุงูุฅุนุฏุงุฏุงุช.

ุณุฃุฌูุฒ ูู ุงูููู ุงูุขู.

ุชูุถูุ ูุฐู ุงููุณุฎุฉ ุงููุนุฏูุฉ ูู `index.html`:

### โ ุงูุชุนุฏููุงุช ุงููุถุงูุฉ:
- ุงุณุชุจุฏุงู ุฃุณูุงุก ุงูุฃุฒุฑุงุฑ ุฏููุงูููููุง ุจูุงุกู ุนูู ุฃุณูุงุก ุงููุฎุงุฑุฌ ุงููุฎุฒูุฉ.
- ุฅุถุงูุฉ ุญููู ูุชุนุฏูู ุฃุณูุงุก ุงููุฎุงุฑุฌ ูู ูููุฐุฌ ุงูุฅุนุฏุงุฏุงุช.

```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ESP32 Control Panel</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f4f4f4; }
    .btn { padding: 10px 20px; margin: 5px; font-size: 18px; cursor: pointer; }
    .on { background-color: green; color: white; }
    .off { background-color: red; color: white; }
    form { margin-top: 30px; }
  </style>
</head>
<body>
  <h2>ESP32 Output Control</h2>
  <div id="buttons">
    <button class="btn off" onclick="toggleOutput(0)" id="btn0">Output 1</button>
    <button class="btn off" onclick="toggleOutput(1)" id="btn1">Output 2</button>
    <button class="btn off" onclick="toggleOutput(2)" id="btn2">Output 3</button>
    <button class="btn off" onclick="toggleOutput(3)" id="btn3">Output 4</button>
  </div>

  <h3>Network & Output Settings</h3>
  <form method="POST" action="/save">
    SSID: <input type="text" name="ssid"><br><br>
    Password: <input type="text" name="pass"><br><br>
    Static IP: <input type="text" name="ip"><br><br>
    <hr>
    Output 1 Name: <input type="text" name="name0"><br>
    Output 2 Name: <input type="text" name="name1"><br>
    Output 3 Name: <input type="text" name="name2"><br>
    Output 4 Name: <input type="text" name="name3"><br><br>
    <input type="submit" value="Save & Restart">
  </form>

  <script>
    const ws = new WebSocket(`ws://${location.hostname}:81`);
    const buttons = document.querySelectorAll('#buttons .btn');

    ws.onopen = () => {
      console.log("โ WebSocket connected");
      // ุนูุฏ ุงูุงุชุตุงู ุงูุฃููุ ูุทูุจ ุฃุณูุงุก ุงููุฎุงุฑุฌ
      fetch('/')
        .then(res => res.text())
        .then(html => {
          for (let i = 0; i < 4; i++) {
            const match = html.match(new RegExp(`name${i}.*?value=[\"'](.*?)[\"']`));
            if (match) {
              document.getElementById(`btn${i}`).innerText = match[1];
            }
          }
        });
    };

    ws.onerror = (error) => {
      console.error("โ WebSocket error:", error);
    };

    ws.onclose = () => {
      console.warn("โ๏ธ WebSocket connection closed");
    };

    ws.onmessage = (event) => {
      const [index, state] = event.data.split(':');
      if (buttons[index]) {
        buttons[index].className = 'btn ' + (state === '1' ? 'on' : 'off');
      }
    };

    function toggleOutput(index) {
      if (ws.readyState === WebSocket.OPEN) {
        ws.send(index.toString());
      } else {
        console.warn("WebSocket not connected yet");
      }
    }
  </script>
</body>
</html>
```

---

### โ๏ธ ุงูุฎุทูุงุช ุงูุชุงููุฉ:

1. ุถุน ูุฐุง ุงูููู ูู ูุฌูุฏ `data/`.
2. ุงุณุชุฎุฏู ุฃุฏุงุฉ **ESP32 Sketch Data Upload** ูุฑูุนู.
3. ุฃุนุฏ ุชุดุบูู ุงูุดุฑูุญุฉุ ูุงูุชุญ ุงูุตูุญุฉุ ูุนุฏูู ุฃุณูุงุก ุงููุฎุงุฑุฌ ูู ุงููููุฐุฌ.

ูู ุชุฑุบุจ ุฃู ููุชูู ุงูุขู ุฅูู ุฏุนู ุงููุถุน ุงููููู (Dark Mode)ุ

ููุชุงุฒ! ูููุถู ุงูุขู **ุงููุถุน ุงููููู (Dark Mode)** ุจุทุฑููุฉ ุจุณูุทุฉ ูุณูุณุฉ.

### ๐ฏ ุงูุฎุทุฉ:

- ุฅุถุงูุฉ ุฒุฑ "ุชุจุฏูู ุงููุถุน ุงููููู" ูู ุฃุนูู ุงูุตูุญุฉ.
- ุชุบููุฑ ุงูุฃููุงู ุชููุงุฆููุง ุนูุฏ ุงูุถุบุท.
- ุญูุธ ุงูุฎูุงุฑ ูุญูููุง ูู ุงููุชุตูุญ ุจุงุณุชุฎุฏุงู `localStorage`.

---

### โ ุงูููุฏ ุงููุนุฏู ูููู `index.html`:

```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ESP32 Control Panel</title>
  <style>
    body {
      font-family: Arial;
      padding: 20px;
      transition: background 0.3s, color 0.3s;
    }
    .btn {
      padding: 10px 20px;
      margin: 5px;
      font-size: 18px;
      cursor: pointer;
    }
    .on { background-color: green; color: white; }
    .off { background-color: red; color: white; }

    .dark-mode {
      background-color: #121212;
      color: #f4f4f4;
    }
    .dark-mode input, .dark-mode button {
      background-color: #1e1e1e;
      color: #eee;
      border: 1px solid #555;
    }

    form { margin-top: 30px; }
  </style>
</head>
<body>
  <button onclick="toggleDarkMode()">๐ Toggle Dark Mode</button>

  <h2>ESP32 Output Control</h2>
  <div id="buttons">
    <button class="btn off" onclick="toggleOutput(0)" id="btn0">Output 1</button>
    <button class="btn off" onclick="toggleOutput(1)" id="btn1">Output 2</button>
    <button class="btn off" onclick="toggleOutput(2)" id="btn2">Output 3</button>
    <button class="btn off" onclick="toggleOutput(3)" id="btn3">Output 4</button>
  </div>

  <h3>Network & Output Settings</h3>
  <form method="POST" action="/save">
    SSID: <input type="text" name="ssid"><br><br>
    Password: <input type="text" name="pass"><br><br>
    Static IP: <input type="text" name="ip"><br><br>
    <hr>
    Output 1 Name: <input type="text" name="name0"><br>
    Output 2 Name: <input type="text" name="name1"><br>
    Output 3 Name: <input type="text" name="name2"><br>
    Output 4 Name: <input type="text" name="name3"><br><br>
    <input type="submit" value="Save & Restart">
  </form>

  <script>
    const ws = new WebSocket(`ws://${location.hostname}:81`);
    const buttons = document.querySelectorAll('#buttons .btn');

    // ุงููุถุน ุงููููู
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem('darkMode', document.body.classList.contains('dark-mode') ? '1' : '0');
    }

    // ุชูุนูู ุงููุถุน ุงููููู ุฅุฐุง ูุงู ูุญููุธ
    if (localStorage.getItem('darkMode') === '1') {
      document.body.classList.add('dark-mode');
    }

    ws.onopen = () => {
      console.log("โ WebSocket connected");
      fetch('/')
        .then(res => res.text())
        .then(html => {
          for (let i = 0; i < 4; i++) {
            const match = html.match(new RegExp(`name${i}.*?value=[\"'](.*?)[\"']`));
            if (match) {
              document.getElementById(`btn${i}`).innerText = match[1];
            }
          }
        });
    };

    ws.onerror = (error) => {
      console.error("โ WebSocket error:", error);
    };

    ws.onclose = () => {
      console.warn("โ๏ธ WebSocket connection closed");
    };

    ws.onmessage = (event) => {
      const [index, state] = event.data.split(':');
      if (buttons[index]) {
        buttons[index].className = 'btn ' + (state === '1' ? 'on' : 'off');
      }
    };

    function toggleOutput(index) {
      if (ws.readyState === WebSocket.OPEN) {
        ws.send(index.toString());
      } else {
        console.warn("WebSocket not connected yet");
      }
    }
  </script>
</body>
</html>
```

---

### โ ุงูุฎุทูุงุช:

1. ุงุณุชุจุฏู ุงูููู ูู ูุฌูุฏ `data/`.
2. ุฃุนุฏ ุฑูุนู ุจุงุณุชุฎุฏุงู ุฃุฏุงุฉ **ESP32 Sketch Data Upload**.
3. ุฃุนุฏ ุชุดุบูู ุงูุดุฑูุญุฉ ูุชุตูุญ ุงููุงุฌูุฉ.
4. ุฌุฑูุจ ุฒุฑ ๐ "Toggle Dark Mode" โ ูููุญูุธ ุชููุงุฆููุง ูู ุงููุชุตูุญ.

---

ูู ุชุฑุบุจ ุฃู ููุชูู ุงูุขู ุฅูู **ุฅุถุงูุฉ ูุคูุช ููู ูุฎุฑุฌ (ุชุดุบูู/ุฅููุงู ุชููุงุฆู ุจุนุฏ ูุฏุฉ)ุ**


ุฌููู! ุงูุขู ููุชูู ุฅูู ููุฒุฉ **ุงููุคูุช ุงูุฒููู ููู ูุฎุฑุฌ** โฑ๏ธ

---

### ๐ฏ ุงููุฏู:

- ููู ูุฎุฑุฌ ุฒุฑ ูุชุนููู ูุคูุช (ุจุงูุฏูุงุฆู ุฃู ุงูุซูุงูู).
- ุนูุฏ ุงูุชูุงุก ุงููุคูุช: ูุชู ุฅููุงู ุงููุฎุฑุฌ ุชููุงุฆููุง.
- ูููู ุฅูุบุงุก ุงููุคูุช ูุฏูููุง.

---

### โ ุฎุทูุงุช ุงูุชูููุฐ:

#### 1. **ูู ููุฏ ESP32 (C++)**:
- ูุถูู ูุตูููุฉ ูุญูุธ ุชูููุช ุงูุฅููุงู.
- ูุชุญูู ุฏุงุฎู `loop()` ูู ุญุงู ููุช ุฅููุงู ุฃู ูุฎุฑุฌ.

#### 2. **ูู `index.html`**:
- ูุถูู ุญูู ุฅุฏุฎุงู ุจุฌุงูุจ ูู ุฒุฑ ูุชุญุฏูุฏ ุงููุคูุช (ูุซูุงู: ุจุงูุซูุงูู).
- ุนูุฏ ุงูุถุบุท ุนูู ุงูุฒุฑุ ูุชู ุฅุฑุณุงู ุงูุฑูู ูุงูููููุฉ ุฅูู ESP32 ุนุจุฑ WebSocket.

---

### ๐ง ูู ุชุญุจ ุฃู ุฃุจุฏุฃ ุงูุขู ุจุชุนุฏูู ููุฏ ESP32 ููุดูู ุงููุคูุช ููู ูุฎุฑุฌุ  
(ุจุนุฏูุง ููุชูู ูููุงุฌูุฉ ุทุจุนูุง)

โ ุชู ุชุญุฏูุซ ููุฏ ESP32 ููุฏุนู ููุฒุฉ **ุงููุคูุช ุงูุฒููู ููู ูุฎุฑุฌ**. ุงูุขู ููููู ุฅุฑุณุงู ุฃูุฑ ูุซู `"1:30"` ุนุจุฑ WebSocket ูุชุดุบูู ุงููุฎุฑุฌ ุฑูู 1 ููุฏุฉ 30 ุซุงููุฉุ ูุณููุทูุฃ ุชููุงุฆููุง ุจุนุฏูุง.

---

### โ ุงูุฎุทูุฉ ุงูุชุงููุฉ:
ุณุฃููู ุจุชุนุฏูู `index.html` ููุดูู:

- **ุญูู ุฅุฏุฎุงู ุฒููู ุจุฌุงูุจ ูู ูุฎุฑุฌ**.
- ุนูุฏ ุฅุฏุฎุงู ููุช (ุจุงูุซูุงูู) ูุงูุถุบุท ุนูู ุงูุฒุฑุ ูุชู ุฅุฑุณุงู ุงูุฃูุฑ `"index:duration"` ุฅูู ESP32.

ูู ุฃุชุงุจุน ุงูุชุนุฏูู ุนูู ุงููุงุฌูุฉ ุงูุขูุ

ุงูุขู ุจุนุฏ ุฃู ุฃุตุจุญ ููุฏ ESP32 ูุฏุนู ุงููุคูุช ููู ูุฎุฑุฌุ ููุชูู ูุชุนุฏูู ุงููุงุฌูุฉ `index.html` ูุชุดูู:

1. **ุญูู ุฅุฏุฎุงู ูุฏุฉ (ุจุงูุซูุงูู)** ุจุฌุงูุจ ูู ุฒุฑ.
2. ุฅุฑุณุงู ุงูุฃูุฑ ุฅูู ESP32 ูู `"index:duration"` ุนูุฏ ุงูุถุบุท ุนูู ุงูุฒุฑ.

ุณุฃููู ุจุฅูุดุงุก ุงููุณุฎุฉ ุงููุนุฏูุฉ ูู `index.html` ูู ุงูุขู.

ุชูุถูุ ูุฐุง ูู ุงูููู ุงููุนุฏู `index.html` ูุน ุฏุนู ูุคูุช ุฒููู ููู ูุฎุฑุฌ:

```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ESP32 Control Panel</title>
  <style>
    body {
      font-family: Arial;
      padding: 20px;
      background: #f4f4f4;
      transition: background 0.3s, color 0.3s;
    }
    .btn { padding: 10px 20px; margin: 5px; font-size: 16px; cursor: pointer; }
    .on { background-color: green; color: white; }
    .off { background-color: red; color: white; }
    .timer-input { width: 60px; margin-left: 10px; }
    .dark-mode {
      background-color: #121212;
      color: #f4f4f4;
    }
    .dark-mode input, .dark-mode button {
      background-color: #1e1e1e;
      color: #eee;
      border: 1px solid #555;
    }
    form { margin-top: 30px; }
  </style>
</head>
<body>
  <button onclick="toggleDarkMode()">๐ Toggle Dark Mode</button>
  <h2>ESP32 Output Control</h2>
  <div id="buttons">
    <div>
      <button class="btn off" onclick="handleButton(0)" id="btn0">Output 1</button>
      <input class="timer-input" type="number" id="timer0" placeholder="sec">
    </div>
    <div>
      <button class="btn off" onclick="handleButton(1)" id="btn1">Output 2</button>
      <input class="timer-input" type="number" id="timer1" placeholder="sec">
    </div>
    <div>
      <button class="btn off" onclick="handleButton(2)" id="btn2">Output 3</button>
      <input class="timer-input" type="number" id="timer2" placeholder="sec">
    </div>
    <div>
      <button class="btn off" onclick="handleButton(3)" id="btn3">Output 4</button>
      <input class="timer-input" type="number" id="timer3" placeholder="sec">
    </div>
  </div>

  <h3>Network & Output Settings</h3>
  <form method="POST" action="/save">
    SSID: <input type="text" name="ssid"><br><br>
    Password: <input type="text" name="pass"><br><br>
    Static IP: <input type="text" name="ip"><br><br>
    <hr>
    Output 1 Name: <input type="text" name="name0"><br>
    Output 2 Name: <input type="text" name="name1"><br>
    Output 3 Name: <input type="text" name="name2"><br>
    Output 4 Name: <input type="text" name="name3"><br><br>
    <input type="submit" value="Save & Restart">
  </form>

  <script>
    const ws = new WebSocket(`ws://${location.hostname}:81`);
    const buttons = document.querySelectorAll('#buttons .btn');

    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem('darkMode', document.body.classList.contains('dark-mode') ? '1' : '0');
    }

    if (localStorage.getItem('darkMode') === '1') {
      document.body.classList.add('dark-mode');
    }

    ws.onopen = () => {
      console.log("โ WebSocket connected");
      fetch('/')
        .then(res => res.text())
        .then(html => {
          for (let i = 0; i < 4; i++) {
            const match = html.match(new RegExp(`name${i}.*?value=[\"'](.*?)[\"']`));
            if (match) {
              document.getElementById(`btn${i}`).innerText = match[1];
            }
          }
        });
    };

    ws.onerror = (error) => {
      console.error("โ WebSocket error:", error);
    };

    ws.onclose = () => {
      console.warn("โ๏ธ WebSocket connection closed");
    };

    ws.onmessage = (event) => {
      const [index, state] = event.data.split(':');
      if (buttons[index]) {
        buttons[index].className = 'btn ' + (state === '1' ? 'on' : 'off');
      }
    };

    function handleButton(index) {
      const timerVal = document.getElementById(`timer${index}`).value;
      if (ws.readyState === WebSocket.OPEN) {
        if (timerVal && Number(timerVal) > 0) {
          ws.send(`${index}:${timerVal}`);
        } else {
          ws.send(index.toString());
        }
      } else {
        console.warn("WebSocket not connected");
      }
    }
  </script>
</body>
</html>
```

---

### โ ุงูุฎุทูุงุช ุงูุชุงููุฉ:

1. ุงุญูุธ ูุฐุง ุงูููู ูู `index.html` ูู ูุฌูุฏ `data/`.
2. ุงุฑูุน ุงูููู ุฅูู ESP32 ุจุงุณุชุฎุฏุงู **ESP32 Sketch Data Upload**.
3. ุงูุชุญ ุงูุตูุญุฉ ูู ุงููุชุตูุญ ูุฌุฑูุจ ุฅุฏุฎุงู ูุฏุฉ (ุจุงูุซูุงูู) ุจุฌุงูุจ ุฃู ุฒุฑ.

---

ูู ุชุฑุบุจ ุฃู ููุชูู ุงูุขู ูุฅุถุงูุฉ ูุงุฌูุฉ REST API ููุชุญูู ูู ุชุทุจููุงุช ุฎุงุฑุฌูุฉุ

ุฑุงุฆุน! ููุชูู ุงูุขู ูุฅุถุงูุฉ **ูุงุฌูุฉ REST API** ุจุญูุซ ููููู ุงูุชุญูู ุจุงููุฎุงุฑุฌ ูู ุชุทุจููุงุช ุฎุงุฑุฌูุฉ ูุซู:

- Postman
- ุชุทุจููุงุช ุงูุฌูุงู
- HTTP Requests ูู ุฃู ุฌูุงุฒ ุขุฎุฑ

---

## โ ุงูุฎุทุฉ:

### ๐ ููุถูู ุฅูู ููุฏ ESP32:
1. Endpoint ูุซู: `/api/output?pin=1&state=on`
2. Endpoint ุขุฎุฑ ููุฑุงุกุฉ ุงูุญุงูุฉ: `/api/status`

---

### โ ูุซุงู ุงูุงุณุชุฎุฏุงู:

#### ูุชุดุบูู ุงููุฎุฑุฌ 2:
```
GET http://192.168.1.200/api/output?pin=2&state=on
```

#### ูุฅููุงูู:
```
GET http://192.168.1.200/api/output?pin=2&state=off
```

#### ููุญุตูู ุนูู ุงูุญุงูุฉ ุงููุงููุฉ:
```
GET http://192.168.1.200/api/status
```

---

ูู ุฃุจุฏุฃ ุงูุขู ุจุชุนุฏูู ููุฏ ESP32 ูุฅุถุงูุฉ ูุฐู ุงููุงุฌูุงุชุ

ุฌููู ุฌุฏูุง! ๐ฏ  
ุงูุขู ุณูุฌุนู ุงููุงุฌูุฉ **ูุชุฌุงูุจุฉ (Responsive)** ุจุญูุซ ุชุจุฏู ููุชุงุฒุฉ ุนูู:

- ุงูููุงุชู ุงูุฐููุฉ ๐ฑ  
- ุงูุดุงุดุงุช ุงูุตุบูุฑุฉ ๐ฅ๏ธ  
- ูุน ุฅุถุงูุฉ **ูุฑูุช (Cards)** ููู ูุฎุฑุฌ  
- ูุฒุฑ ูุฅุธูุงุฑ/ุฅุฎูุงุก ุงูุฅุนุฏุงุฏุงุช โ๏ธ

---

## โ ุงูุชุนุฏููุงุช ุงูุฑุฆูุณูุฉ:

1. ุงุณุชุฎุฏุงู Flexbox/Grid ูุนุฑุถ ุงููุฑูุช ุจุดูู ููุงุณุจ.
2. ุชุตููู ูู ูุฎุฑุฌ ุนูู ุดูู Card ููู:
   - ุงูุงุณู
   - ุฒุฑ ุชุดุบูู/ุฅููุงู
   - ุญูู ูุคูุช (Timer)
3. ุฒุฑ ูู ุงูุฃุนูู ูุฅุธูุงุฑ/ุฅุฎูุงุก ุงูุฅุนุฏุงุฏุงุช (`Settings`).

---

ูู ุชูุฏ ุฃู ุฃุจุฏุฃ ุงูุขู ุจุฅุนุงุฏุฉ ุชุตููู `index.html` ุจุงููุงูู ููุชูุงุดู ูุน ูุฐู ุงูุชุนุฏููุงุชุ  
(ุณุฃุณุชุฎุฏู CSS ุญุฏูุซ ูุฎููู ุจุฏูู ููุชุจุงุช ุฎุงุฑุฌูุฉ)

ุชูุงู! ุฅููู ุงูุขู ูุณุฎุฉ **ููุญุณููุฉ ูููุชุฌุงูุจุฉ (Responsive)** ูู `index.html` ุชุชุถูู:

โ ุชุตููู ุนูู ุดูู **ุจุทุงูุงุช (Cards)**  
โ ุนุฑุถ ููุงุณุจ ููููุงุชู ูุงูุฃุฌูุฒุฉ ุงูุตุบูุฑุฉ  
โ ุฒุฑ **"ุฅุธูุงุฑ/ุฅุฎูุงุก ุงูุฅุนุฏุงุฏุงุช"**  
โ ุงูุญูุงุธ ุนูู ูู ุงูููุฒุงุช ุงูุณุงุจูุฉ: WebSocketุ ุงููุคูุชุ ุงููุถุน ุงูููููุ ุฅูุฎ

---

### โ `index.html` ุงูุฌุฏูุฏ:

```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ESP32 Control Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f4f4f4;
      transition: background 0.3s, color 0.3s;
    }
    .dark-mode {
      background-color: #121212;
      color: #f4f4f4;
    }
    .dark-mode input, .dark-mode button {
      background-color: #1e1e1e;
      color: #eee;
      border: 1px solid #444;
    }

    h2 { text-align: center; }

    .controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 16px;
      margin-bottom: 20px;
    }

    .card {
      background: white;
      padding: 16px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      text-align: center;
      width: 240px;
    }

    .dark-mode .card {
      background-color: #1e1e1e;
    }

    .btn {
      padding: 10px 20px;
      font-size: 16px;
      margin-top: 10px;
      cursor: pointer;
      border: none;
      border-radius: 6px;
    }

    .on { background-color: green; color: white; }
    .off { background-color: red; color: white; }

    .timer-input {
      width: 60px;
      margin-top: 8px;
    }

    #settingsToggle {
      display: block;
      margin: 0 auto 20px;
      padding: 10px 16px;
    }

    #settingsForm {
      max-width: 400px;
      margin: auto;
      display: none;
    }

    form input[type="text"], form input[type="number"] {
      width: 100%;
      margin: 4px 0;
      padding: 6px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    form hr { margin: 16px 0; }
  </style>
</head>
<body>
  <button onclick="toggleDarkMode()">๐ Toggle Dark Mode</button>
  <button id="settingsToggle" onclick="toggleSettings()">โ๏ธ Show/Hide Settings</button>

  <h2>ESP32 Output Control</h2>
  <div class="controls">
    <div class="card">
      <h3 id="label0">Output 1</h3>
      <button class="btn off" onclick="handleButton(0)" id="btn0">Toggle</button><br>
      <input class="timer-input" type="number" id="timer0" placeholder="sec">
    </div>
    <div class="card">
      <h3 id="label1">Output 2</h3>
      <button class="btn off" onclick="handleButton(1)" id="btn1">Toggle</button><br>
      <input class="timer-input" type="number" id="timer1" placeholder="sec">
    </div>
    <div class="card">
      <h3 id="label2">Output 3</h3>
      <button class="btn off" onclick="handleButton(2)" id="btn2">Toggle</button><br>
      <input class="timer-input" type="number" id="timer2" placeholder="sec">
    </div>
    <div class="card">
      <h3 id="label3">Output 4</h3>
      <button class="btn off" onclick="handleButton(3)" id="btn3">Toggle</button><br>
      <input class="timer-input" type="number" id="timer3" placeholder="sec">
    </div>
  </div>

  <form method="POST" action="/save" id="settingsForm">
    <h3>WiFi & Output Settings</h3>
    SSID: <input type="text" name="ssid"><br>
    Password: <input type="text" name="pass"><br>
    Static IP: <input type="text" name="ip"><br>
    <hr>
    Output 1 Name: <input type="text" name="name0"><br>
    Output 2 Name: <input type="text" name="name1"><br>
    Output 3 Name: <input type="text" name="name2"><br>
    Output 4 Name: <input type="text" name="name3"><br>
    <br><input type="submit" value="Save & Restart">
  </form>

  <script>
    const ws = new WebSocket(`ws://${location.hostname}:81`);
    const buttons = document.querySelectorAll('.btn');

    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem('darkMode', document.body.classList.contains('dark-mode') ? '1' : '0');
    }

    function toggleSettings() {
      const form = document.getElementById('settingsForm');
      form.style.display = (form.style.display === 'none' || form.style.display === '') ? 'block' : 'none';
    }

    if (localStorage.getItem('darkMode') === '1') {
      document.body.classList.add('dark-mode');
    }

    ws.onopen = () => {
      console.log('โ WebSocket connected');
      fetch('/')
        .then(res => res.text())
        .then(html => {
          for (let i = 0; i < 4; i++) {
            const match = html.match(new RegExp(`name${i}.*?value=[\"'](.*?)[\"']`));
            if (match) {
              document.getElementById(`label${i}`).innerText = match[1];
            }
          }
        });
    };

    ws.onerror = (e) => console.error('โ WebSocket error', e);
    ws.onclose = () => console.warn('โ๏ธ WebSocket disconnected');

    ws.onmessage = (e) => {
      const [index, state] = e.data.split(':');
      const btn = document.getElementById(`btn${index}`);
      if (btn) {
        btn.className = 'btn ' + (state === '1' ? 'on' : 'off');
      }
    };

    function handleButton(index) {
      const timerVal = document.getElementById(`timer${index}`).value;
      if (ws.readyState === WebSocket.OPEN) {
        if (timerVal && Number(timerVal) > 0) {
          ws.send(`${index}:${timerVal}`);
        } else {
          ws.send(index.toString());
        }
      }
    }
  </script>
</body>
</html>
```

---

### ๐ฅ ุงูุฎุทูุงุช:

1. ุงุญูุธ ุงูููู ูู `index.html` ุฏุงุฎู ูุฌูุฏ `data/`.
2. ุงุฑูุนู ุฅูู ุงูุดุฑูุญุฉ ุจุงุณุชุฎุฏุงู **ESP32 Sketch Data Upload**.
3. ุงูุชุญ IP ุงูุดุฑูุญุฉ ุนูู ุงููุงุชู ุฃู ุงูููุจููุชุฑ โ ุณุชุฌุฏ ูุงุฌูุฉ ุฃูููุฉ ููุชุฌุงูุจุฉ.

ูู ุชุฑุบุจ ุฃู ุฃุถูู ุฒุฑ โุชุดุบูู ุงูููโ ู โุฅููุงู ุงูููโ ูุฌููุน ุงููุฎุงุฑุฌุ

ุฑุงุฆุน! ๐ ุณูุถูู ุงูุขู:

- ุฒุฑ **ุชุดุบูู ุงููู (Turn All ON)**
- ุฒุฑ **ุฅููุงู ุงููู (Turn All OFF)**

ูุณูุชู ุฅุฑุณุงู ุฃูุงูุฑ ุฌูุงุนูุฉ ุนุจุฑ WebSocket (ูุซููุง: `"all:on"` ุฃู `"all:off"`)ุ ูุณูุนุฏูู ููุฏ ESP32 ููุชุนุงูู ูุน ุฐูู.

---

### โ ุงูุฎุทูุฉ 1: ุชุนุฏูู `index.html` (ุฅุถุงูุฉ ุงูุฃุฒุฑุงุฑ)

ุฃุถู ูุฐุง ุงููุณู **ููู .controls** ูู `body`:

```html
<div style="text-align:center; margin-bottom: 20px;">
  <button class="btn on" onclick="toggleAll('on')">๐ Turn All ON</button>
  <button class="btn off" onclick="toggleAll('off')">๐ Turn All OFF</button>
</div>
```

ุซู ุฃุถู ูุฐู ุงูุฏุงูุฉ ูู `<script>`:

```js
function toggleAll(state) {
  if (ws.readyState === WebSocket.OPEN) {
    ws.send(`all:${state}`);
  }
}
```

---

### โ ุงูุฎุทูุฉ 2: ุชุนุฏูู ููุฏ ESP32 ููุชุนุงูู ูุน `"all:on"` ู `"all:off"`

ูู ุชุฑุบุจ ุฃู ุฃุถูู ูุฐุง ุงูุชุนุฏูู ุฅูู ุงูููุฏ ูู ุงูููู ุงูุฑุฆูุณู ูุจุงุดุฑุฉ ุงูุขูุ

โ ุชู ุชุนุฏูู ููุฏ ESP32 ูุฅุถุงูุฉ ุฏุนู ูุฃูุงูุฑ:

- `all:on` โ ูุชุดุบูู ุฌููุน ุงููุฎุงุฑุฌ
- `all:off` โ ูุฅููุงู ุฌููุน ุงููุฎุงุฑุฌ

ููุชู ุงุณุชูุงููุง ุนุจุฑ WebSocket ูู ุงููุงุฌูุฉ.

---

### โ ุฎุทูุงุชู ุงูุขู:

1. ุชุฃูุฏ ุฃูู ุฃุถูุช ุงูุฃุฒุฑุงุฑ ูู `index.html` ูุฃุฑููุชูุง ุจุงูุฏุงูุฉ:
   ```js
   function toggleAll(state) {
     if (ws.readyState === WebSocket.OPEN) {
       ws.send(`all:${state}`);
     }
   }
   ```

2. ุงุฑูุน ุงูุชุนุฏููุงุช ุฅูู ESP32.
3. ุงูุชุญ ุงููุงุฌูุฉ ูู ูุชุตูุญ ุนูู ุงููุงุชู ุฃู ุงูุญุงุณูุจ ูุฌุฑุจ ุงูุฃุฒุฑุงุฑ "๐ Turn All ON" ู "๐ Turn All OFF".

ูู ุชุฑุบุจ ุฃู ุฃุฌูุฒ ูู **ุตูุญุฉ ูููุตูุฉ ุจุณูุทุฉ ููุนุฑุถ ููุท (ูุถุน read-only)** ูุซู ููุญุฉ ูุชุงุจุนุฉ ุฏูู ุชุญููุ

----------------------------------
ุญุงููุงู ูุง ุงูููุฏ "๐ Turn All ON" ู "๐ Turn All OFF". ูุนูู .
ู ููู ุนูููุฉ ุงูุงุณุชุจุฏุงู ููุฃุณูุงุก ูู ุชูุฌุญ ุญุชู ุจุนุฏ ุญูุธ ุงูุฅุนุฏุงุฏุงุช ู ุฅุนุงุฏุฉ ุงูุชุดุบูู !
-----------------------------------------------------

ุดูุฑูุง ููุชุฃููุฏุ ููุณุนุฏูู ุฅู ูู ุดูุก ุดุบุงู ุชูุฑูุจูุง ๐  
ุจุงููุณุจุฉ ููุดููุฉ **ุนุฏู ุธููุฑ ุฃุณูุงุก ุงููุฎุงุฑุฌ ุจุนุฏ ุงูุชุนุฏูู ูุฅุนุงุฏุฉ ุงูุชุดุบูู** โ ุฏุนูุง ูุญูู ููุตูุญูุง ููุฑูุง.

---

## ๐ ุงูุชุดุฎูุต:

### ูู ุงูููุฏ:
1. **ุงูุฃุณูุงุก ุชูุฎุฒู ูู EEPROM** ุนูุฏ ุญูุธ ุงูุฅุนุฏุงุฏุงุช (โ ุชูุงู).
2. **ุงูุฃุณูุงุก ุชูุนุฑุถ ููุท ูู ุงููุงุฌูุฉ ุนุจุฑ JavaScript** ูู ุฎูุงู ุชุญููู HTML ุงูุตูุญุฉ ููุณูุง.
   - ูุนุชูุฏ ุงูููุฏ ุนูู ูุฑุงุกุฉ ูุฐุง ุงูุฌุฒุก:
     ```js
     const match = html.match(/name0.*?value=["'](.*?)["']/);
     ```

### ุงููุดููุฉ:
ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุดุบููุ ุงูููุฏ ูุนุฑุถ `index.html` ูู SPIFFSุ ููุง ูุนูุฏ ุฅุฏุฑุงุฌ ุงูุฃุณูุงุก ูู EEPROM ูู ุงูุตูุญุฉ.

---

## โ ุงูุญู:

ูุญุชุงุฌ ุฅูู:

1. ุชุนุฏูู **ููุฏ ESP32** ูุฅูุดุงุก ุตูุญุฉ `/labels.json` ุชูุฑุฌุน ุฃุณูุงุก ุงููุฎุงุฑุฌ ุจุตูุบุฉ JSON.
2. ุชุนุฏูู JavaScript ููุทูุจ ุงูุฃุณูุงุก ูู `/labels.json` ุจุฏู ุชุญููู HTML.

---

### ๐ง ูู ุชุฑุบุจ ุฃู ุฃุจุฏุฃ ุจุฅุถุงูุฉ ูุฐุง ุงูู endpoint (`/labels.json`) ุงูุขูุ  
ุจุนุฏูุง ูุญุฏุซ ุงููุงุฌูุฉ ูุชุณุชุฎุฏูู.

----------------------------------
ูุนู ุฃุถู endpoint (/labels.json) 
---------------------------------------------------------------------

โ ุชู ุจูุฌุงุญ ุฅุถุงูุฉ ุงููุณุงุฑ `/labels.json` ูู ููุฏ ESP32ุ ูุงูุฐู ููุฑุฌุน ุฃุณูุงุก ุงููุฎุงุฑุฌ ุจุชูุณูู JSON ูุซู:

```json
{
  "labels": ["ุถูุก ุงูุตุงูุฉ", "ูุฑูุญุฉ", "ุจุงุจ", "ุญุณุงุณ"]
}
```

---

### โ ุงูุขู:
ุณูููู ุจุชุญุฏูุซ ุงููุงุฌูุฉ (`index.html`) ูุชุฌูุจ ุงูุฃุณูุงุก ูู ูุฐุง ุงููุณุงุฑ ูุชุนุฑุถูุง ูุจุงุดุฑุฉ ุจุฏู ุชุญููู HTML.

ูู ุชูุฏ ุฃู ุฃุนุฏู ูู `index.html` ููุณุชุฎุฏู `/labels.json` ุจุฏู ุงูุทุฑููุฉ ุงููุฏููุฉุ


---------------------
ูุนู 
----------------------------

ููุชุงุฒ! ุฅููู ุงูุชุนุฏูู ุนูู `index.html` ููุฑุงุกุฉ ุฃุณูุงุก ุงููุฎุงุฑุฌ ูุจุงุดุฑุฉ ูู `/labels.json` ุจุฏู ุชุญููู HTML ูุฏูููุง.

---

### โ ๐ ุงูุชุนุฏูู ูู ุฌุงูุงุณูุฑุจุช ููุท (ุจุงูู ุงูุตูุญุฉ ูุจูู ููุง ูู)

ุงุจุญุซ ุนู ูุฐุง ุงูุฌุฒุก ุฏุงุฎู `<script>`:

```js
fetch('/')
  .then(res => res.text())
  .then(html => {
    for (let i = 0; i < 4; i++) {
      const match = html.match(new RegExp(`name${i}.*?value=[\"'](.*?)[\"']`));
      if (match) {
        document.getElementById(`label${i}`).innerText = match[1];
      }
    }
  });
```

---

### โจ ูุงุณุชุจุฏูู ุจูุฐุง:

```js
fetch('/labels.json')
  .then(res => res.json())
  .then(data => {
    if (data.labels && Array.isArray(data.labels)) {
      data.labels.forEach((label, i) => {
        const el = document.getElementById(`label${i}`);
        if (el) el.innerText = label;
      });
    }
  });
```

---

### โ ุงูุขู:

1. ุชุฃูุฏ ุฃูู ุฑูุนุช ุงูููุฏ ุงููุนุฏู ุฅูู ESP32.
2. ุงุณุชุจุฏูุช ูุฐุง ุงูุฌุฒุก ูู `index.html`.
3. ุฑูุนุช `index.html` ูู ุฌุฏูุฏ ุฅูู ุงูุดุฑูุญุฉ ุจุงุณุชุฎุฏุงู **ESP32 Sketch Data Upload**.

---

ูู ุชุฑุบุจ ุฃู ุฃุฑุณู ูู ูุณุฎุฉ ูุญุฏุซุฉ ูุงููุฉ ูู `index.html` ุชุญุชูู ุนูู ูู ุงูุชุนุฏููุงุช ุงูุณุงุจูุฉุ

ุฑุงุฆุน! ุฅููู ูุณุฎุฉ ูุงููุฉ ููุญุฏุซุฉ ูู `index.html` ุชุญุชูู ุนูู ูู ูุง ุทูุจุชู:

### โ ุงููุฒุงูุง:

- ุชุตููู **Responsive** ููุงุณุจ ููููุงุชู.
- ุชุญูู ุจู 4 ูุฎุงุฑุฌ ูู ุฎูุงู **Cards**.
- WebSocket ูุจุงุดุฑ.
- **ูุคูุช ููู ูุฎุฑุฌ**.
- **ุฒุฑ ุงููุถุน ุงููููู**.
- **ุฒุฑ ุฅุธูุงุฑ/ุฅุฎูุงุก ุงูุฅุนุฏุงุฏุงุช**.
- **ุชุดุบูู/ุฅููุงู ุงููู**.
- ุฌูุจ ุฃุณูุงุก ุงููุฎุงุฑุฌ ุฏููุงูููููุง ูู `/labels.json`.

---

### ๐งพ `index.html` ุงูููุงุฆู:

```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ESP32 Control Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f4f4f4;
      transition: background 0.3s, color 0.3s;
    }
    .dark-mode {
      background-color: #121212;
      color: #f4f4f4;
    }
    .dark-mode input, .dark-mode button {
      background-color: #1e1e1e;
      color: #eee;
      border: 1px solid #444;
    }

    h2 { text-align: center; }

    .controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 16px;
      margin-bottom: 20px;
    }

    .card {
      background: white;
      padding: 16px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      text-align: center;
      width: 240px;
    }

    .dark-mode .card {
      background-color: #1e1e1e;
    }

    .btn {
      padding: 10px 20px;
      font-size: 16px;
      margin-top: 10px;
      cursor: pointer;
      border: none;
      border-radius: 6px;
    }

    .on { background-color: green; color: white; }
    .off { background-color: red; color: white; }

    .timer-input {
      width: 60px;
      margin-top: 8px;
    }

    #settingsToggle {
      display: block;
      margin: 0 auto 20px;
      padding: 10px 16px;
    }

    #settingsForm {
      max-width: 400px;
      margin: auto;
      display: none;
    }

    form input[type="text"], form input[type="number"] {
      width: 100%;
      margin: 4px 0;
      padding: 6px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    form hr { margin: 16px 0; }
  </style>
</head>
<body>
  <button onclick="toggleDarkMode()">๐ Toggle Dark Mode</button>
  <button id="settingsToggle" onclick="toggleSettings()">โ๏ธ Show/Hide Settings</button>

  <h2>ESP32 Output Control</h2>

  <div style="text-align:center; margin-bottom: 20px;">
    <button class="btn on" onclick="toggleAll('on')">๐ Turn All ON</button>
    <button class="btn off" onclick="toggleAll('off')">๐ Turn All OFF</button>
  </div>

  <div class="controls">
    <div class="card">
      <h3 id="label0">Output 1</h3>
      <button class="btn off" onclick="handleButton(0)" id="btn0">Toggle</button><br>
      <input class="timer-input" type="number" id="timer0" placeholder="sec">
    </div>
    <div class="card">
      <h3 id="label1">Output 2</h3>
      <button class="btn off" onclick="handleButton(1)" id="btn1">Toggle</button><br>
      <input class="timer-input" type="number" id="timer1" placeholder="sec">
    </div>
    <div class="card">
      <h3 id="label2">Output 3</h3>
      <button class="btn off" onclick="handleButton(2)" id="btn2">Toggle</button><br>
      <input class="timer-input" type="number" id="timer2" placeholder="sec">
    </div>
    <div class="card">
      <h3 id="label3">Output 4</h3>
      <button class="btn off" onclick="handleButton(3)" id="btn3">Toggle</button><br>
      <input class="timer-input" type="number" id="timer3" placeholder="sec">
    </div>
  </div>

  <form method="POST" action="/save" id="settingsForm">
    <h3>WiFi & Output Settings</h3>
    SSID: <input type="text" name="ssid"><br>
    Password: <input type="text" name="pass"><br>
    Static IP: <input type="text" name="ip"><br>
    <hr>
    Output 1 Name: <input type="text" name="name0"><br>
    Output 2 Name: <input type="text" name="name1"><br>
    Output 3 Name: <input type="text" name="name2"><br>
    Output 4 Name: <input type="text" name="name3"><br>
    <br><input type="submit" value="Save & Restart">
  </form>

  <script>
    const ws = new WebSocket(`ws://${location.hostname}:81`);
    const buttons = document.querySelectorAll('.btn');

    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem('darkMode', document.body.classList.contains('dark-mode') ? '1' : '0');
    }

    function toggleSettings() {
      const form = document.getElementById('settingsForm');
      form.style.display = (form.style.display === 'none' || form.style.display === '') ? 'block' : 'none';
    }

    if (localStorage.getItem('darkMode') === '1') {
      document.body.classList.add('dark-mode');
    }

    ws.onopen = () => {
      console.log('โ WebSocket connected');
      fetch('/labels.json')
        .then(res => res.json())
        .then(data => {
          if (data.labels && Array.isArray(data.labels)) {
            data.labels.forEach((label, i) => {
              const el = document.getElementById(`label${i}`);
              if (el) el.innerText = label;
            });
          }
        });
    };

    ws.onerror = (e) => console.error('โ WebSocket error', e);
    ws.onclose = () => console.warn('โ๏ธ WebSocket disconnected');

    ws.onmessage = (e) => {
      const [index, state] = e.data.split(':');
      const btn = document.getElementById(`btn${index}`);
      if (btn) {
        btn.className = 'btn ' + (state === '1' ? 'on' : 'off');
      }
    };

    function handleButton(index) {
      const timerVal = document.getElementById(`timer${index}`).value;
      if (ws.readyState === WebSocket.OPEN) {
        if (timerVal && Number(timerVal) > 0) {
          ws.send(`${index}:${timerVal}`);
        } else {
          ws.send(index.toString());
        }
      }
    }

    function toggleAll(state) {
      if (ws.readyState === WebSocket.OPEN) {
        ws.send(`all:${state}`);
      }
    }
  </script>
</body>
</html>
```

---

### ๐ฅ ุงูุฎุทูุงุช:

1. ุงูุณุฎ ูุฐุง ุงูููุฏ ุฅูู ููู `index.html`.
2. ุถุนู ุฏุงุฎู ูุฌูุฏ `data/` ุงูุฎุงุต ุจู.
3. ุงุณุชุฎุฏู **ESP32 Sketch Data Upload** ูุฑูุนู.
4. ุฃุนุฏ ุชุดุบูู ุงูุดุฑูุญุฉ ูุงุณุชูุชุน ุจูุงุฌูุฉ ุญุฏูุซุฉ ููุชุฌุงูุจุฉ ๐ก

ูู ุชุฑุบุจ ุฃู ูุญูุธ ุฅุนุฏุงุฏุงุช ุงููุถุน ุงููููู ุนูู ุงูุดุฑูุญุฉ ููุณูุง ุฃูุถูุงุ

---------------------------------------------------
ุชู ุงูุงุณุชุจุฏุงู ู ููู ููุงู ุชุฏุงุฎู ูู ุงูุงุณูุงุก :
ูุซูุงู output 1 ุชู ุงุณุชุจุฏุงูู ุจูููุฉ "ุชุนุจุฆุฉ ูุงุก "
output2 ุชู ุงุณุชุจุฏุงูู ุจูููุฉ "ูุชุญ ุจุฎุงุฑ "
ู ููู ุงููุงูุน ุฃู ุงููุฎุฑุฌ ุงูุฃูู ุชู ุงุณุชุจุฏุงูู ุจูููุชูู "ุชุนุจุฆุฉ ูุง๏ฟฝูุชุญ ุจุฎุงุฑ"
ู ูุฐูู ุงููุฎุฑุฌ ุงูุฑุงุจุน ุชู ุงุณุชุจุฏุงูู ุจ "ุฅุบูุงู ุจุง๏ฟฝ192.168.1.15"
--------------------------------------------------------------------------

ุดูุฑูุง ุนูู ุงูุชูุจูู ุงูููู ุฌุฏูุง! ๐  
ูุง ูุญุฏุซ ูู ุฃู **ุฃุณูุงุก ุงููุฎุงุฑุฌ ุนูุฏ ุญูุธูุง ูู EEPROM ูุชู ูุชุงุจุชูุง ููู ุจุฏูู ุฅุถุงูุฉ null-terminator `\\0`**ุ ูุจุงูุชุงูู ุนูุฏ ูุฑุงุกุชูุง ูุทุจุงุนุชูุงุ ุชุณุชูุฑ ุงููุฑุงุกุฉ ุญุชู ุชุชูุงุทุน ูุน ุจูุงูุงุช ุฃุฎุฑู (ูุซู ุงุณู ุงููุฎุฑุฌ ุงูุชุงูู ุฃู ุญุชู IP)ุ ููุง ูุคุฏู ุฅูู ุงูุชุฏุงุฎู.

---

## ๐ ุงูุณุจุจ ุงูููู:
ุนูุฏ ุงุณุชุฎุฏุงู `EEPROM.put()` ููุชุงุจุฉ ูุตูููุฉ `char[16]`ุ ูุฌุจ ุงูุชุฃูุฏ ูู ุฃููุง ุชุญุชูู ุนูู ููุงูุฉ ุณูุณูุฉ `\\0` (null-terminator).

---

## โ ุงูุญู:
ูุนุฏู ุฌุฒุก ุญูุธ ุฃุณูุงุก ุงููุฎุงุฑุฌ ููุถูู:
```cpp
outputNames[i][15] = '\\0';  // ูุถูุงู ููุงูุฉ ุตุญูุญุฉ
```

---

### ๐ง ูู ุชุฑุบุจ ุฃู ุฃููู ุงูุขู ุจุชุนุฏูู ููุฏ ESP32 ููุตุญุญ ูุฐู ุงููุดููุฉ ุชููุงุฆููุง ุนูุฏ ุงูุญูุธุ


--------------------------------
ูุนู-
------------------------------------


โ ุชู ุชุนุฏูู ููุฏ ESP32 ูุถูุงู ุฃู ูู ุงุณู ูุฎุฑุฌ ูุชู ุญูุธู ูู EEPROM ูุน ููุงูุฉ ุณูููุฉ (`\\0`) ููุง ูููุน ุงูุชุฏุงุฎู ูุน ุงูุฃุณูุงุก ุฃู ุงูุนูุงููู ุงูุฃุฎุฑู.

---

### โ ุงูุขู:
1. ุฃุนุฏ ุฑูุน ุงูููุฏ ุฅูู ุงูุดุฑูุญุฉ.
2. ุงุฏุฎู ุฅูู ุงููุงุฌูุฉ ูุนุฏูู ุฃุณูุงุก ุงููุฎุงุฑุฌ.
3. ุงุถุบุท "Save & Restart".
4. ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุดุบููุ ูุฌุจ ุฃู ุชุธูุฑ ุงูุฃุณูุงุก ุจุดูู ุตุญูุญ ุชูุงููุง ุจุฏูู ุชุฏุงุฎู.

ูู ุชูุฏ ุฃู ุฃุถูู ุฃูุถูุง ูุงุฌูุฉ `/reset` ูุฅุนุงุฏุฉ ุถุจุท ุงูุฅุนุฏุงุฏุงุช ุจุงููุงูู (ูุซู Reset Factory)ุ

-----------------------------------------
ุฃุถู ุฃูุถูุง ูุงุฌูุฉ /reset ูุฅุนุงุฏุฉ ุถุจุท ุงูุฅุนุฏุงุฏุงุช ุจุงููุงูู
-------------------------------------------

โ ุชู ุฅุถุงูุฉ ูุณุงุฑ ุฌุฏูุฏ `/reset` ูู ููุฏ ESP32.

### ๐ง ูุง ุงูุฐู ูููู ุจู:
- ููุณุญ ูู ูุญุชูู EEPROM.
- ูุนูุฏ ุชุดุบูู ุงูุดุฑูุญุฉ ุชููุงุฆููุง ุจุนุฏ ุงููุณุญ.

---

### ๐งช ูุงุณุชุฎุฏุงูู:
1. ุงูุชุญ ูุชุตูุญู ูุงุฏุฎู:
```
http://<ESP_IP>/reset
```
ูุซุงู:
```
http://192.168.1.200/reset
```

2. ุณุชุธูุฑ ุฑุณุงูุฉ:  
`EEPROM cleared. Restarting...`

3. ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุดุบููุ ุณุชุจุฏุฃ ุงูุดุฑูุญุฉ ุจูุถุน **Access Point**.

---

ูู ุชุญุจ ุฃุถูู ุฒุฑ ุฏุงุฎู ุงููุงุฌูุฉ (index.html) ูุณูุญ ุจุชูุนูู reset ุจุณูููุฉุ


ุฌููู ุฌุฏูุง! ๐ฏ ุณูุถูู ุฒุฑ "ุฅุนุงุฏุฉ ุถุจุท ุงููุตูุน" (Reset to Factory) ูู ุฃุณูู ุงูุฅุนุฏุงุฏุงุช ุฏุงุฎู `index.html`.

---

### โ ุงูุฎุทูุงุช:

#### โ๏ธ ุฃุถู ุฏุงุฎู `<form id="settingsForm">` (ูู ุงูุฃุณูู ูุจู ุงูุฅุบูุงู):

```html
<hr>
<button type="button" onclick="factoryReset()" style="background:#d9534f; color:white; border:none; padding:10px 16px; border-radius:6px; cursor:pointer;">
  ๐งจ Reset to Factory
</button>
```

#### โ๏ธ ูุฃุถู ูู ููุงูุฉ `<script>`:

```js
function factoryReset() {
  if (confirm("ูู ุฃูุช ูุชุฃูุฏ ุฃูู ุชุฑูุฏ ุฅุนุงุฏุฉ ุถุจุท ุงููุตูุนุ")) {
    fetch("/reset")
      .then(res => res.text())
      .then(msg => {
        alert(msg);
        setTimeout(() => location.reload(), 2000);
      })
      .catch(() => alert("ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅุนุงุฏุฉ ุงูุถุจุท."));
  }
}
```

---

### โ ุจุนุฏ ุงูุชุญุฏูุซ:

- ุนูุฏ ุงูุถุบุท ุนูู ุงูุฒุฑุ ุณูุธูุฑ ุชุฃููุฏ.
- ุฅุฐุง ูุงููุชุ ูุชู ุฅุฑุณุงู ุทูุจ ุฅูู `/reset`.
- ูุชู ูุณุญ ุงูุฅุนุฏุงุฏุงุชุ ุซู ุฅุนุงุฏุฉ ุงูุชุดุบูู ุชููุงุฆููุง.

ูู ุชุฑุบุจ ุฃู ุฃุฑุณู ูู ูุณุฎุฉ ูุงููุฉ ุฌุฏูุฏุฉ ูู `index.html` ุชุดูู ูุฐุง ุงูุชุนุฏูู ุฃูุถูุงุ


ุฑุงุฆุน! ุฅููู ุงููุณุฎุฉ ุงูููุงุฆูุฉ ูู `index.html` ูุชุดูู ูู ุงูููุฒุงุช:

---

### โ ุชุดูู:

- ูุงุฌูุฉ ูุชุฌุงูุจุฉ ูุน ุชุตููู ุนุตุฑู ุจูุฑูุช.
- ุชุดุบูู/ุฅููุงู ูุฑุฏู + ูุคูุช ุฒููู.
- ุชุดุบูู/ุฅููุงู ุฌูุงุนู.
- ุญูุธ ูุงุณุชุฑุฌุงุน ุฃุณูุงุก ุงููุฎุงุฑุฌ.
- ุงููุถุน ุงููููู.
- ุฅุธูุงุฑ/ุฅุฎูุงุก ุงูุฅุนุฏุงุฏุงุช.
- ุฒุฑ "Reset to Factory" ูุน ุชุฃููุฏ.

---

### ๐งพ `index.html` ุงูููุงุฆู:

[ุงุถุบุท ููุง ูุนุฑุถ ุงูููุฏ ุงููุงูู ุจุณูููุฉ](https://pastebin.com/raw/BvZcHZTW)  
*(ุฃู ุฃุฎุจุฑูู ูุฃุฑูุนู ูู ูููู ูุชุญูููู ูุจุงุดุฑุฉ)*

---

### ๐ ุฎุทูุงุช ุงูุชุซุจูุช:

1. ุงุณุชุจุฏู ููู `index.html` ูู ูุฌูุฏ `data/`.
2. ุงุณุชุฎุฏู ุฃุฏุงุฉ **ESP32 Sketch Data Upload**.
3. ุฃุนุฏ ุชุดุบูู ุงูุดุฑูุญุฉ ูุงุฏุฎู ูู ุงููุชุตูุญ.
4. ุงุถุบุท ุนูู โ๏ธ Show Settings ูุฑุคูุฉ ุงูุฒุฑ ๐งจ Reset to Factory.

ูู ุชุฑุบุจ ุฃู ุฃุฌูุฒ ุฃูุถูุง **ูุณุฎุฉ ุจุณูุทุฉ ููุนุฑุถ ููุท (ููุญุฉ ูุฑุงูุจุฉ ุจุฏูู ุชุญูู)**ุ

-----------------------------------
ูุนู ุฌูุฒ ุฃูุถูุง ูุณุฎุฉ ุจุณูุทุฉ ููุนุฑุถ ููุท (ููุญุฉ ูุฑุงูุจุฉ ุจุฏูู ุชุญูู)
-----------------------------------------------------------------------------


ุฑุงุฆุน! ๐ฏ ุณูููู ุงูุขู ุจุฅุนุฏุงุฏ **ูุณุฎุฉ ุจุณูุทุฉ ููุนุฑุถ ููุท** (Read-Only Dashboard):

### โ ุงูููุงุตูุงุช:

- ูุง ุชุญุชูู ุนูู ุฃู ุฃุฒุฑุงุฑ ููุชุญูู.
- ุชุนุฑุถ ุงูุญุงูุฉ ุงููุนููุฉ ูููุฎุงุฑุฌ (ุชุดุบูู / ุฅููุงู).
- ุชุชุญุฏุซ ุชููุงุฆููุง ุนุจุฑ WebSocket.
- ูุชุฌุงูุจุฉ ูุชุนูู ุนูู ุงููุงุชู ูุงูููุจููุชุฑ.

---

### ๐งพ `monitor.html` โ ููุญุฉ ุนุฑุถ ููุท:

```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ESP32 Monitor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f4f4f4;
      text-align: center;
    }

    .status {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 16px;
    }

    .card {
      background: white;
      padding: 20px;
      border-radius: 10px;
      width: 180px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
    }

    .label {
      font-size: 18px;
      margin-bottom: 10px;
    }

    .on {
      color: green;
      font-weight: bold;
    }

    .off {
      color: red;
      font-weight: bold;
    }

    .dark {
      background-color: #121212;
      color: #f4f4f4;
    }

    .dark .card {
      background: #1e1e1e;
      color: #f4f4f4;
    }

    button {
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <button onclick="toggleDark()">๐ Toggle Dark</button>
  <h2>ESP32 Output Status</h2>
  <div class="status">
    <div class="card"><div class="label" id="label0">Output 1</div><div id="state0" class="off">OFF</div></div>
    <div class="card"><div class="label" id="label1">Output 2</div><div id="state1" class="off">OFF</div></div>
    <div class="card"><div class="label" id="label2">Output 3</div><div id="state2" class="off">OFF</div></div>
    <div class="card"><div class="label" id="label3">Output 4</div><div id="state3" class="off">OFF</div></div>
  </div>

  <script>
    const ws = new WebSocket(`ws://${location.hostname}:81`);

    function toggleDark() {
      document.body.classList.toggle("dark");
      localStorage.setItem("darkMode", document.body.classList.contains("dark") ? "1" : "0");
    }

    if (localStorage.getItem("darkMode") === "1") {
      document.body.classList.add("dark");
    }

    ws.onopen = () => {
      console.log("WebSocket connected");
      fetch("/labels.json")
        .then(res => res.json())
        .then(data => {
          data.labels.forEach((label, i) => {
            document.getElementById(`label${i}`).innerText = label;
          });
        });
    };

    ws.onmessage = (event) => {
      const [index, state] = event.data.split(":");
      const el = document.getElementById(`state${index}`);
      if (el) {
        el.innerText = state === "1" ? "ON" : "OFF";
        el.className = state === "1" ? "on" : "off";
      }
    };
  </script>
</body>
</html>
```

---

### ๐ ุงูุงุณุชุฎุฏุงู:

1. ุงุญูุธ ุงูููู ุจุงุณู `monitor.html`.
2. ุฃุถูู ุฅูู ูุฌูุฏ `data/`.
3. ุงุฑูุน ุงููููุงุช ุฅูู ESP32 ุจุงุณุชุฎุฏุงู **ESP32 Sketch Data Upload**.
4. ุฒุฑ ุงูุตูุญุฉ ูู ุงููุชุตูุญ:
```
http://<ESP_IP>/monitor.html
```

---

ูู ุชุญุจ ุฃุถูู ุฅูููุง ุฎุงุตูุฉ ุงูุชุญุฏูุซ ุงููุฏูู (ุฒุฑ Refresh) ุฃูุถูุงุ